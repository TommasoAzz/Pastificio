-- phpMyAdmin SQL Dump
-- version 4.6.6deb5
-- https://www.phpmyadmin.net/
--
-- Host: localhost:3306
-- Creato il: Feb 10, 2019 alle 22:11
-- Versione del server: 10.1.38-MariaDB-0ubuntu0.18.04.1
-- Versione PHP: 7.2.10-0ubuntu0.18.04.1

SET SQL_MODE = "NO_AUTO_VALUE_ON_ZERO";
SET time_zone = "+00:00";


/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8mb4 */;

--
-- Database: `pastificio`
--

DELIMITER $$
--
-- Procedure
--
CREATE DEFINER=`tazzalin`@`localhost` PROCEDURE `AvvioProduzioneLotto` (IN `Pasta` INT, IN `Peso` INT(4), IN `Prezzo` FLOAT, IN `Scadenza` DATE)  BEGIN
DECLARE Fase VARCHAR(4);
DECLARE Lotto INTEGER;

DECLARE EXIT HANDLER FOR SQLEXCEPTION ROLLBACK;
DECLARE EXIT HANDLER FOR SQLWARNING ROLLBACK;

START TRANSACTION;

INSERT INTO LOTTODIPRODUZIONE (PesoUnitario, PrezzoUnitario, ScadenzaUnita, CodPasta)
VALUES (Peso, Prezzo, Scadenza, Pasta);

SELECT FaseImpasto INTO Fase FROM PASTA WHERE CodPasta = Pasta;
SELECT CodLotto INTO Lotto FROM LOTTODIPRODUZIONE ORDER BY CodLotto DESC LIMIT 1;

INSERT INTO lavorazione (CodLotto, CodFase, DataOraInizio)
VALUES (Lotto, Fase, DATE_FORMAT(NOW(), '%Y-%m-%d %H:%i:%s'));

COMMIT;
END$$

CREATE DEFINER=`tazzalin`@`localhost` PROCEDURE `PastaInScadenza` (IN `NumGiorni` INT(3))  BEGIN
SELECT Nome, LP.CodLotto, COUNT(NumConfezione) AS NumeroConfezioni FROM CONFEZIONE C JOIN LOTTODIPRODUZIONE LP ON C.CodLotto=LP.CodLotto JOIN PASTA P ON LP.CodPasta = P.CodPasta WHERE NumOrdine IS NULL AND ScadenzaUnita <= DATE_ADD(CURDATE(), INTERVAL NumGiorni DAY) GROUP BY Nome, LP.CodLotto;
END$$

--
-- Funzioni
--
CREATE DEFINER=`tazzalin`@`localhost` FUNCTION `LottoMadeInItaly` (`Lotto` INT) RETURNS TINYINT(1) BEGIN
    DECLARE MadeInItaly TINYINT(1);
    DECLARE dInizioLav DATE;
    
    SELECT MIN(DataOraInizio) INTO dInizioLav FROM lavorazione WHERE CodLotto = Lotto;
    
    IF EXISTS (
        SELECT L.CodLotto
        FROM LOTTODIPRODUZIONE L
        WHERE L.CodLotto = Lotto AND L.CodLotto NOT IN (
            SELECT LP.CodLotto
            FROM LOTTODIPRODUZIONE LP
            JOIN PASTA P ON LP.CodPasta = P.CodPasta
            JOIN composizione C ON P.CodMiscela = C.CodMiscela
            JOIN GRANO G ON C.Varieta = G.Varieta
            JOIN FORNITURA Fa ON G.Varieta = Fa.Varieta
            JOIN FORNITORE Fe ON Fa.CodFornitore = Fe.CodFornitore
            WHERE Fe.Stato <> 'Italia' AND YEAR(Fa.DataFornitura) = YEAR(dInizioLav)
        )
    ) THEN SET MadeInItaly = 1;
    ELSE SET MadeInItaly = 0;
    END IF;
    
    RETURN MadeInItaly;
END$$

CREATE DEFINER=`tazzalin`@`localhost` FUNCTION `ProfittiDiUnAnno` (`Anno` YEAR) RETURNS FLOAT BEGIN
DECLARE RicavoR FLOAT;
DECLARE RicavoN FLOAT;
DECLARE SpesaTot FLOAT;

SELECT SUM(Importo) INTO RicavoR FROM ORDINE O JOIN fatturaR FR ON O.NumOrdine = FR.NumOrdine WHERE YEAR(DataPagamento) = Anno;
SELECT SUM(Importo) INTO RicavoN FROM ORDINE O JOIN fatturaN FN ON O.NumOrdine = FN.NumOrdine WHERE YEAR(DataPagamento) = Anno;
SELECT SUM(Spesa) INTO SpesaTot FROM fornitura WHERE YEAR(DataFattura) = Anno;

RETURN RicavoR + RicavoN - SpesaTot;
END$$

DELIMITER ;

-- --------------------------------------------------------

--
-- Struttura stand-in per le viste `ClassificaClienti`
-- (Vedi sotto per la vista effettiva)
--
CREATE TABLE `ClassificaClienti` (
`Codice` varchar(6)
,`Nome` varchar(50)
,`Fatturato` double
);

-- --------------------------------------------------------

--
-- Struttura stand-in per le viste `Clienti`
-- (Vedi sotto per la vista effettiva)
--
CREATE TABLE `Clienti` (
`Codice` varchar(6)
,`Nome` varchar(50)
,`Fatturato` double
);

-- --------------------------------------------------------

--
-- Struttura della tabella `composizione`
--

CREATE TABLE `composizione` (
  `Varieta` varchar(20) NOT NULL,
  `CodMiscela` int(11) NOT NULL,
  `PercentualeSemola` int(3) NOT NULL DEFAULT '100'
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

--
-- Dump dei dati per la tabella `composizione`
--

INSERT INTO `composizione` (`Varieta`, `CodMiscela`, `PercentualeSemola`) VALUES
('Colosseo', 1, 70),
('Colosseo', 2, 100),
('Colosseo', 9, 25),
('Desert Durum', 1, 30),
('Desert Durum', 9, 75),
('Iride', 5, 100),
('Iride', 7, 40),
('Marco Aurelio', 7, 60),
('Marco Aurelio', 8, 100);

-- --------------------------------------------------------

--
-- Struttura della tabella `CONFEZIONE`
--

CREATE TABLE `CONFEZIONE` (
  `NumConfezione` int(11) NOT NULL,
  `CodLotto` int(11) NOT NULL,
  `NumOrdine` int(11) DEFAULT NULL COMMENT '=NULL => Pacchetto non venduto / !=NULL => pacchetto venduto'
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

--
-- Dump dei dati per la tabella `CONFEZIONE`
--

INSERT INTO `CONFEZIONE` (`NumConfezione`, `CodLotto`, `NumOrdine`) VALUES
(1857, 39, NULL),
(1858, 39, NULL),
(1859, 39, NULL),
(1860, 39, NULL),
(1861, 39, NULL),
(1862, 39, NULL),
(1863, 39, NULL),
(1864, 39, NULL),
(1916, 40, NULL),
(1917, 40, NULL),
(1918, 40, NULL),
(1919, 40, NULL),
(1920, 40, NULL),
(1921, 40, NULL),
(1922, 40, NULL),
(1972, 41, NULL),
(1973, 41, NULL),
(1974, 41, NULL),
(1975, 41, NULL),
(1976, 41, NULL),
(1977, 41, NULL),
(1978, 41, NULL),
(1979, 41, NULL),
(1980, 41, NULL),
(2022, 42, NULL),
(2023, 42, NULL),
(2024, 42, NULL),
(2025, 42, NULL),
(2026, 42, NULL),
(2027, 42, NULL),
(7, 1, 1),
(19, 1, 1),
(52, 2, 1),
(55, 2, 1),
(60, 2, 1),
(68, 2, 1),
(89, 2, 1),
(98, 2, 1),
(104, 2, 1),
(125, 3, 1),
(126, 3, 1),
(129, 3, 1),
(153, 3, 1),
(9, 1, 2),
(15, 1, 2),
(22, 1, 2),
(29, 1, 2),
(45, 1, 2),
(47, 1, 2),
(49, 1, 2),
(63, 2, 2),
(72, 2, 2),
(80, 2, 2),
(92, 2, 2),
(96, 2, 2),
(99, 2, 2),
(108, 2, 2),
(117, 3, 2),
(120, 3, 2),
(132, 3, 2),
(134, 3, 2),
(136, 3, 2),
(144, 3, 2),
(157, 4, 2),
(169, 4, 2),
(170, 4, 2),
(172, 4, 2),
(178, 4, 2),
(179, 4, 2),
(192, 4, 2),
(24, 1, 3),
(39, 1, 3),
(57, 2, 3),
(59, 2, 3),
(66, 2, 3),
(69, 2, 3),
(70, 2, 3),
(105, 2, 3),
(106, 2, 3),
(123, 3, 3),
(130, 3, 3),
(135, 3, 3),
(147, 3, 3),
(158, 4, 3),
(180, 4, 3),
(185, 4, 3),
(187, 4, 3),
(189, 4, 3),
(191, 4, 3),
(194, 4, 3),
(197, 4, 3),
(1, 1, 4),
(6, 1, 4),
(16, 1, 4),
(26, 1, 4),
(30, 1, 4),
(32, 1, 4),
(41, 1, 4),
(87, 2, 4),
(111, 3, 4),
(113, 3, 4),
(119, 3, 4),
(149, 3, 4),
(164, 4, 4),
(166, 4, 4),
(168, 4, 4),
(171, 4, 4),
(173, 4, 4),
(184, 4, 4),
(186, 4, 4),
(188, 4, 4),
(190, 4, 4),
(196, 4, 4),
(3, 1, 5),
(5, 1, 5),
(20, 1, 5),
(21, 1, 5),
(23, 1, 5),
(25, 1, 5),
(28, 1, 5),
(31, 1, 5),
(35, 1, 5),
(48, 1, 5),
(56, 2, 5),
(76, 2, 5),
(79, 2, 5),
(83, 2, 5),
(91, 2, 5),
(93, 2, 5),
(100, 2, 5),
(107, 2, 5),
(116, 3, 5),
(124, 3, 5),
(142, 3, 5),
(152, 3, 5),
(177, 4, 5),
(181, 4, 5),
(200, 5, 5),
(18, 1, 6),
(36, 1, 6),
(61, 2, 6),
(62, 2, 6),
(73, 2, 6),
(84, 2, 6),
(110, 3, 6),
(143, 3, 6),
(150, 3, 6),
(161, 4, 6),
(176, 4, 6),
(182, 4, 6),
(195, 4, 6),
(198, 4, 6),
(8, 1, 7),
(54, 2, 7),
(67, 2, 7),
(71, 2, 7),
(82, 2, 7),
(85, 2, 7),
(112, 3, 7),
(114, 3, 7),
(128, 3, 7),
(139, 3, 7),
(140, 3, 7),
(151, 3, 7),
(154, 3, 7),
(155, 3, 7),
(167, 4, 7),
(183, 4, 7),
(4, 1, 8),
(12, 1, 8),
(14, 1, 8),
(37, 1, 8),
(46, 1, 8),
(50, 1, 8),
(53, 2, 8),
(58, 2, 8),
(64, 2, 8),
(65, 2, 8),
(77, 2, 8),
(78, 2, 8),
(81, 2, 8),
(86, 2, 8),
(109, 3, 8),
(115, 3, 8),
(122, 3, 8),
(137, 3, 8),
(148, 3, 8),
(162, 4, 8),
(17, 1, 9),
(27, 1, 9),
(34, 1, 9),
(38, 1, 9),
(40, 1, 9),
(74, 2, 9),
(75, 2, 9),
(88, 2, 9),
(97, 2, 9),
(101, 2, 9),
(118, 3, 9),
(127, 3, 9),
(145, 3, 9),
(159, 4, 9),
(160, 4, 9),
(163, 4, 9),
(165, 4, 9),
(174, 4, 9),
(175, 4, 9),
(199, 4, 9),
(2, 1, 10),
(10, 1, 10),
(11, 1, 10),
(13, 1, 10),
(33, 1, 10),
(42, 1, 10),
(43, 1, 10),
(44, 1, 10),
(51, 2, 10),
(90, 2, 10),
(94, 2, 10),
(95, 2, 10),
(102, 2, 10),
(103, 2, 10),
(121, 3, 10),
(131, 3, 10),
(133, 3, 10),
(138, 3, 10),
(141, 3, 10),
(146, 3, 10),
(156, 3, 10),
(193, 4, 10),
(215, 5, 11),
(224, 5, 11),
(269, 6, 11),
(276, 6, 11),
(290, 6, 11),
(316, 7, 11),
(339, 7, 11),
(346, 8, 11),
(357, 8, 11),
(358, 8, 11),
(375, 8, 11),
(376, 8, 11),
(391, 9, 11),
(206, 5, 12),
(226, 5, 12),
(234, 5, 12),
(254, 6, 12),
(259, 6, 12),
(279, 6, 12),
(291, 6, 12),
(298, 6, 12),
(299, 6, 12),
(300, 6, 12),
(301, 6, 12),
(327, 7, 12),
(340, 7, 12),
(352, 8, 12),
(353, 8, 12),
(364, 8, 12),
(369, 8, 12),
(371, 8, 12),
(378, 8, 12),
(379, 8, 12),
(389, 9, 12),
(208, 5, 13),
(216, 5, 13),
(277, 6, 13),
(305, 7, 13),
(310, 7, 13),
(324, 7, 13),
(365, 8, 13),
(384, 9, 13),
(396, 9, 13),
(214, 5, 14),
(217, 5, 14),
(218, 5, 14),
(219, 5, 14),
(227, 5, 14),
(230, 5, 14),
(241, 5, 14),
(242, 5, 14),
(263, 6, 14),
(266, 6, 14),
(270, 6, 14),
(274, 6, 14),
(278, 6, 14),
(295, 6, 14),
(302, 6, 14),
(308, 7, 14),
(311, 7, 14),
(321, 7, 14),
(325, 7, 14),
(336, 7, 14),
(347, 8, 14),
(350, 8, 14),
(400, 9, 14),
(207, 5, 15),
(222, 5, 15),
(223, 5, 15),
(236, 5, 15),
(247, 6, 15),
(251, 6, 15),
(264, 6, 15),
(271, 6, 15),
(275, 6, 15),
(281, 6, 15),
(285, 6, 15),
(288, 6, 15),
(289, 6, 15),
(293, 6, 15),
(313, 7, 15),
(330, 7, 15),
(334, 7, 15),
(338, 7, 15),
(341, 7, 15),
(344, 8, 15),
(349, 8, 15),
(356, 8, 15),
(370, 8, 15),
(398, 9, 15),
(399, 9, 15),
(203, 5, 16),
(210, 5, 16),
(213, 5, 16),
(228, 5, 16),
(231, 5, 16),
(232, 5, 16),
(237, 5, 16),
(246, 6, 16),
(255, 6, 16),
(304, 7, 16),
(306, 7, 16),
(314, 7, 16),
(319, 7, 16),
(331, 7, 16),
(335, 7, 16),
(351, 8, 16),
(361, 8, 16),
(368, 8, 16),
(374, 8, 16),
(382, 9, 16),
(394, 9, 16),
(204, 5, 17),
(212, 5, 17),
(221, 5, 17),
(235, 5, 17),
(238, 5, 17),
(245, 6, 17),
(248, 6, 17),
(256, 6, 17),
(260, 6, 17),
(262, 6, 17),
(268, 6, 17),
(272, 6, 17),
(283, 6, 17),
(286, 6, 17),
(296, 6, 17),
(297, 6, 17),
(312, 7, 17),
(320, 7, 17),
(322, 7, 17),
(328, 7, 17),
(355, 8, 17),
(362, 8, 17),
(386, 9, 17),
(387, 9, 17),
(397, 9, 17),
(220, 5, 18),
(252, 6, 18),
(258, 6, 18),
(287, 6, 18),
(292, 6, 18),
(303, 6, 18),
(309, 7, 18),
(318, 7, 18),
(323, 7, 18),
(329, 7, 18),
(343, 8, 18),
(345, 8, 18),
(363, 8, 18),
(372, 8, 18),
(388, 9, 18),
(395, 9, 18),
(205, 5, 19),
(209, 5, 19),
(211, 5, 19),
(229, 5, 19),
(233, 5, 19),
(239, 5, 19),
(244, 6, 19),
(267, 6, 19),
(273, 6, 19),
(280, 6, 19),
(282, 6, 19),
(294, 6, 19),
(307, 7, 19),
(326, 7, 19),
(359, 8, 19),
(360, 8, 19),
(366, 8, 19),
(367, 8, 19),
(377, 8, 19),
(380, 9, 19),
(381, 9, 19),
(385, 9, 19),
(390, 9, 19),
(392, 9, 19),
(201, 5, 20),
(202, 5, 20),
(225, 5, 20),
(240, 5, 20),
(243, 6, 20),
(249, 6, 20),
(250, 6, 20),
(253, 6, 20),
(257, 6, 20),
(261, 6, 20),
(265, 6, 20),
(284, 6, 20),
(315, 7, 20),
(317, 7, 20),
(332, 7, 20),
(333, 7, 20),
(337, 7, 20),
(342, 8, 20),
(348, 8, 20),
(354, 8, 20),
(373, 8, 20),
(383, 9, 20),
(393, 9, 20),
(420, 10, 21),
(431, 10, 21),
(432, 10, 21),
(443, 10, 21),
(475, 11, 21),
(491, 11, 21),
(492, 11, 21),
(502, 11, 21),
(520, 12, 21),
(556, 13, 21),
(586, 13, 21),
(597, 13, 21),
(614, 14, 21),
(615, 14, 21),
(621, 14, 21),
(634, 14, 21),
(635, 14, 21),
(643, 14, 21),
(655, 14, 21),
(658, 15, 21),
(670, 15, 21),
(406, 9, 22),
(414, 10, 22),
(437, 10, 22),
(464, 11, 22),
(501, 11, 22),
(516, 12, 22),
(533, 12, 22),
(543, 12, 22),
(563, 13, 22),
(571, 13, 22),
(576, 13, 22),
(578, 13, 22),
(592, 13, 22),
(599, 14, 22),
(608, 14, 22),
(609, 14, 22),
(610, 14, 22),
(617, 14, 22),
(626, 14, 22),
(627, 14, 22),
(660, 15, 22),
(402, 9, 23),
(405, 9, 23),
(419, 10, 23),
(444, 10, 23),
(454, 11, 23),
(462, 11, 23),
(468, 11, 23),
(473, 11, 23),
(488, 11, 23),
(493, 11, 23),
(532, 12, 23),
(538, 12, 23),
(546, 12, 23),
(551, 12, 23),
(572, 13, 23),
(584, 13, 23),
(605, 14, 23),
(630, 14, 23),
(641, 14, 23),
(646, 14, 23),
(651, 14, 23),
(656, 14, 23),
(669, 15, 23),
(681, 15, 23),
(702, 15, 23),
(408, 9, 24),
(471, 11, 24),
(486, 11, 24),
(487, 11, 24),
(490, 11, 24),
(591, 13, 24),
(611, 14, 24),
(620, 14, 24),
(638, 14, 24),
(679, 15, 24),
(687, 15, 24),
(698, 15, 24),
(699, 15, 24),
(705, 15, 24),
(426, 10, 25),
(433, 10, 25),
(435, 10, 25),
(438, 10, 25),
(448, 10, 25),
(450, 10, 25),
(452, 11, 25),
(498, 11, 25),
(500, 11, 25),
(515, 12, 25),
(528, 12, 25),
(540, 12, 25),
(557, 13, 25),
(590, 13, 25),
(595, 13, 25),
(631, 14, 25),
(645, 14, 25),
(673, 15, 25),
(676, 15, 25),
(678, 15, 25),
(689, 15, 25),
(704, 15, 25),
(412, 9, 26),
(428, 10, 26),
(439, 10, 26),
(446, 10, 26),
(447, 10, 26),
(455, 11, 26),
(478, 11, 26),
(484, 11, 26),
(514, 12, 26),
(547, 12, 26),
(552, 12, 26),
(553, 12, 26),
(602, 14, 26),
(606, 14, 26),
(618, 14, 26),
(633, 14, 26),
(694, 15, 26),
(697, 15, 26),
(421, 10, 27),
(425, 10, 27),
(427, 10, 27),
(449, 10, 27),
(451, 11, 27),
(453, 11, 27),
(458, 11, 27),
(461, 11, 27),
(485, 11, 27),
(503, 11, 27),
(510, 12, 27),
(526, 12, 27),
(535, 12, 27),
(549, 12, 27),
(565, 13, 27),
(603, 14, 27),
(616, 14, 27),
(622, 14, 27),
(636, 14, 27),
(648, 14, 27),
(657, 14, 27),
(662, 15, 27),
(665, 15, 27),
(677, 15, 27),
(696, 15, 27),
(703, 15, 27),
(411, 9, 28),
(434, 10, 28),
(476, 11, 28),
(494, 11, 28),
(512, 12, 28),
(519, 12, 28),
(529, 12, 28),
(531, 12, 28),
(555, 13, 28),
(654, 14, 28),
(671, 15, 28),
(674, 15, 28),
(675, 15, 28),
(683, 15, 28),
(695, 15, 28),
(403, 9, 29),
(409, 9, 29),
(463, 11, 29),
(483, 11, 29),
(499, 11, 29),
(511, 12, 29),
(523, 12, 29),
(536, 12, 29),
(537, 12, 29),
(545, 12, 29),
(561, 13, 29),
(564, 13, 29),
(567, 13, 29),
(581, 13, 29),
(585, 13, 29),
(587, 13, 29),
(667, 15, 29),
(418, 10, 30),
(423, 10, 30),
(429, 10, 30),
(445, 10, 30),
(466, 11, 30),
(472, 11, 30),
(477, 11, 30),
(480, 11, 30),
(524, 12, 30),
(542, 12, 30),
(562, 13, 30),
(569, 13, 30),
(580, 13, 30),
(594, 13, 30),
(596, 13, 30),
(600, 14, 30),
(607, 14, 30),
(612, 14, 30),
(623, 14, 30),
(624, 14, 30),
(666, 15, 30),
(668, 15, 30),
(672, 15, 30),
(684, 15, 30),
(700, 15, 30),
(407, 9, 31),
(413, 10, 31),
(415, 10, 31),
(416, 10, 31),
(436, 10, 31),
(440, 10, 31),
(459, 11, 31),
(465, 11, 31),
(469, 11, 31),
(496, 11, 31),
(506, 11, 31),
(513, 12, 31),
(530, 12, 31),
(541, 12, 31),
(550, 12, 31),
(554, 12, 31),
(560, 13, 31),
(573, 13, 31),
(589, 13, 31),
(625, 14, 31),
(642, 14, 31),
(664, 15, 31),
(682, 15, 31),
(685, 15, 31),
(692, 15, 31),
(410, 9, 32),
(417, 10, 32),
(457, 11, 32),
(481, 11, 32),
(482, 11, 32),
(504, 11, 32),
(505, 11, 32),
(508, 12, 32),
(534, 12, 32),
(544, 12, 32),
(548, 12, 32),
(559, 13, 32),
(577, 13, 32),
(613, 14, 32),
(628, 14, 32),
(632, 14, 32),
(644, 14, 32),
(691, 15, 32),
(701, 15, 32),
(422, 10, 33),
(424, 10, 33),
(430, 10, 33),
(441, 10, 33),
(467, 11, 33),
(517, 12, 33),
(522, 12, 33),
(525, 12, 33),
(566, 13, 33),
(568, 13, 33),
(575, 13, 33),
(579, 13, 33),
(588, 13, 33),
(604, 14, 33),
(640, 14, 33),
(649, 14, 33),
(663, 15, 33),
(686, 15, 33),
(690, 15, 33),
(404, 9, 34),
(456, 11, 34),
(470, 11, 34),
(489, 11, 34),
(497, 11, 34),
(507, 12, 34),
(509, 12, 34),
(521, 12, 34),
(527, 12, 34),
(570, 13, 34),
(583, 13, 34),
(637, 14, 34),
(647, 14, 34),
(652, 14, 34),
(653, 14, 34),
(661, 15, 34),
(693, 15, 34),
(401, 9, 35),
(442, 10, 35),
(460, 11, 35),
(474, 11, 35),
(479, 11, 35),
(495, 11, 35),
(518, 12, 35),
(539, 12, 35),
(558, 13, 35),
(574, 13, 35),
(582, 13, 35),
(593, 13, 35),
(598, 13, 35),
(601, 14, 35),
(619, 14, 35),
(629, 14, 35),
(639, 14, 35),
(650, 14, 35),
(659, 15, 35),
(680, 15, 35),
(688, 15, 35),
(713, 16, 36),
(723, 16, 36),
(757, 17, 36),
(766, 17, 36),
(772, 17, 36),
(778, 17, 36),
(779, 17, 36),
(799, 18, 36),
(809, 18, 36),
(833, 18, 36),
(840, 18, 36),
(843, 18, 36),
(887, 19, 36),
(905, 20, 36),
(729, 16, 37),
(736, 16, 37),
(761, 17, 37),
(768, 17, 37),
(784, 17, 37),
(796, 17, 37),
(801, 18, 37),
(803, 18, 37),
(816, 18, 37),
(823, 18, 37),
(835, 18, 37),
(836, 18, 37),
(852, 18, 37),
(869, 19, 37),
(871, 19, 37),
(888, 19, 37),
(904, 20, 37),
(720, 16, 38),
(730, 16, 38),
(738, 16, 38),
(752, 17, 38),
(753, 17, 38),
(759, 17, 38),
(764, 17, 38),
(767, 17, 38),
(786, 17, 38),
(790, 17, 38),
(834, 18, 38),
(855, 19, 38),
(857, 19, 38),
(860, 19, 38),
(874, 19, 38),
(883, 19, 38),
(889, 19, 38),
(895, 19, 38),
(706, 16, 39),
(708, 16, 39),
(721, 16, 39),
(735, 16, 39),
(742, 16, 39),
(755, 17, 39),
(760, 17, 39),
(771, 17, 39),
(793, 17, 39),
(802, 18, 39),
(804, 18, 39),
(805, 18, 39),
(828, 18, 39),
(841, 18, 39),
(845, 18, 39),
(846, 18, 39),
(848, 18, 39),
(850, 18, 39),
(894, 19, 39),
(900, 19, 39),
(902, 19, 39),
(709, 16, 40),
(710, 16, 40),
(722, 16, 40),
(724, 16, 40),
(734, 16, 40),
(741, 16, 40),
(744, 16, 40),
(749, 17, 40),
(751, 17, 40),
(763, 17, 40),
(770, 17, 40),
(787, 17, 40),
(810, 18, 40),
(815, 18, 40),
(824, 18, 40),
(827, 18, 40),
(849, 18, 40),
(858, 19, 40),
(872, 19, 40),
(880, 19, 40),
(886, 19, 40),
(893, 19, 40),
(899, 19, 40),
(906, 20, 40),
(707, 16, 41),
(743, 16, 41),
(754, 17, 41),
(774, 17, 41),
(788, 17, 41),
(807, 18, 41),
(808, 18, 41),
(820, 18, 41),
(861, 19, 41),
(891, 19, 41),
(897, 19, 41),
(726, 16, 42),
(747, 17, 42),
(765, 17, 42),
(776, 17, 42),
(777, 17, 42),
(782, 17, 42),
(789, 17, 42),
(813, 18, 42),
(826, 18, 42),
(830, 18, 42),
(842, 18, 42),
(856, 19, 42),
(863, 19, 42),
(875, 19, 42),
(877, 19, 42),
(892, 19, 42),
(718, 16, 43),
(732, 16, 43),
(733, 16, 43),
(737, 16, 43),
(740, 16, 43),
(748, 17, 43),
(750, 17, 43),
(769, 17, 43),
(773, 17, 43),
(775, 17, 43),
(795, 17, 43),
(811, 18, 43),
(812, 18, 43),
(814, 18, 43),
(821, 18, 43),
(825, 18, 43),
(831, 18, 43),
(832, 18, 43),
(839, 18, 43),
(844, 18, 43),
(862, 19, 43),
(866, 19, 43),
(870, 19, 43),
(878, 19, 43),
(903, 19, 43),
(715, 16, 44),
(725, 16, 44),
(731, 16, 44),
(756, 17, 44),
(783, 17, 44),
(785, 17, 44),
(791, 17, 44),
(806, 18, 44),
(822, 18, 44),
(847, 18, 44),
(853, 18, 44),
(864, 19, 44),
(868, 19, 44),
(873, 19, 44),
(876, 19, 44),
(881, 19, 44),
(884, 19, 44),
(885, 19, 44),
(712, 16, 45),
(714, 16, 45),
(716, 16, 45),
(717, 16, 45),
(719, 16, 45),
(728, 16, 45),
(745, 16, 45),
(746, 16, 45),
(762, 17, 45),
(797, 17, 45),
(798, 18, 45),
(817, 18, 45),
(837, 18, 45),
(851, 18, 45),
(865, 19, 45),
(867, 19, 45),
(879, 19, 45),
(896, 19, 45),
(898, 19, 45),
(711, 16, 46),
(727, 16, 46),
(739, 16, 46),
(758, 17, 46),
(780, 17, 46),
(781, 17, 46),
(792, 17, 46),
(794, 17, 46),
(800, 18, 46),
(818, 18, 46),
(819, 18, 46),
(829, 18, 46),
(838, 18, 46),
(854, 18, 46),
(859, 19, 46),
(882, 19, 46),
(890, 19, 46),
(901, 19, 46),
(909, 20, 47),
(912, 20, 47),
(937, 20, 47),
(945, 20, 47),
(948, 21, 47),
(952, 21, 47),
(956, 21, 47),
(969, 21, 47),
(973, 21, 47),
(975, 21, 47),
(983, 21, 47),
(985, 21, 47),
(999, 22, 47),
(1013, 22, 47),
(1039, 22, 47),
(1057, 23, 47),
(1059, 23, 47),
(1060, 23, 47),
(1074, 23, 47),
(1080, 23, 47),
(1084, 23, 47),
(914, 20, 48),
(935, 20, 48),
(965, 21, 48),
(978, 21, 48),
(987, 21, 48),
(988, 21, 48),
(991, 21, 48),
(992, 21, 48),
(1003, 22, 48),
(1026, 22, 48),
(1027, 22, 48),
(1037, 22, 48),
(1052, 22, 48),
(1068, 23, 48),
(1079, 23, 48),
(1082, 23, 48),
(1090, 23, 48),
(1097, 23, 48),
(916, 20, 49),
(921, 20, 49),
(927, 20, 49),
(928, 20, 49),
(936, 20, 49),
(938, 20, 49),
(951, 21, 49),
(954, 21, 49),
(974, 21, 49),
(989, 21, 49),
(995, 21, 49),
(996, 22, 49),
(1002, 22, 49),
(1006, 22, 49),
(1010, 22, 49),
(1020, 22, 49),
(1047, 22, 49),
(1048, 22, 49),
(1094, 23, 49),
(1099, 23, 49),
(919, 20, 50),
(922, 20, 50),
(926, 20, 50),
(933, 20, 50),
(939, 20, 50),
(944, 20, 50),
(950, 21, 50),
(957, 21, 50),
(972, 21, 50),
(981, 21, 50),
(998, 22, 50),
(1005, 22, 50),
(1014, 22, 50),
(1016, 22, 50),
(1018, 22, 50),
(1023, 22, 50),
(1040, 22, 50),
(1049, 22, 50),
(1086, 23, 50),
(908, 20, 51),
(915, 20, 51),
(934, 20, 51),
(942, 20, 51),
(947, 21, 51),
(984, 21, 51),
(993, 21, 51),
(1004, 22, 51),
(1011, 22, 51),
(1019, 22, 51),
(1028, 22, 51),
(1053, 22, 51),
(1054, 23, 51),
(1073, 23, 51),
(1081, 23, 51),
(913, 20, 52),
(918, 20, 52),
(929, 20, 52),
(930, 20, 52),
(949, 21, 52),
(960, 21, 52),
(962, 21, 52),
(964, 21, 52),
(976, 21, 52),
(1015, 22, 52),
(1035, 22, 52),
(1041, 22, 52),
(1061, 23, 52),
(1065, 23, 52),
(1066, 23, 52),
(1071, 23, 52),
(1072, 23, 52),
(1085, 23, 52),
(1088, 23, 52),
(1095, 23, 52),
(920, 20, 53),
(940, 20, 53),
(953, 21, 53),
(959, 21, 53),
(970, 21, 53),
(980, 21, 53),
(994, 21, 53),
(997, 22, 53),
(1009, 22, 53),
(1012, 22, 53),
(1034, 22, 53),
(1038, 22, 53),
(1042, 22, 53),
(1050, 22, 53),
(1056, 23, 53),
(1091, 23, 53),
(923, 20, 54),
(925, 20, 54),
(966, 21, 54),
(967, 21, 54),
(971, 21, 54),
(977, 21, 54),
(990, 21, 54),
(1007, 22, 54),
(1008, 22, 54),
(1021, 22, 54),
(1032, 22, 54),
(1033, 22, 54),
(1046, 22, 54),
(1058, 23, 54),
(1067, 23, 54),
(1078, 23, 54),
(1089, 23, 54),
(1092, 23, 54),
(907, 20, 55),
(924, 20, 55),
(931, 20, 55),
(943, 20, 55),
(958, 21, 55),
(963, 21, 55),
(986, 21, 55),
(1017, 22, 55),
(1024, 22, 55),
(1025, 22, 55),
(1030, 22, 55),
(1044, 22, 55),
(1062, 23, 55),
(1064, 23, 55),
(1069, 23, 55),
(1087, 23, 55),
(955, 21, 56),
(961, 21, 56),
(982, 21, 56),
(1000, 22, 56),
(1031, 22, 56),
(1036, 22, 56),
(1051, 22, 56),
(1070, 23, 56),
(1096, 23, 56),
(910, 20, 57),
(911, 20, 57),
(917, 20, 57),
(932, 20, 57),
(941, 20, 57),
(946, 20, 57),
(968, 21, 57),
(979, 21, 57),
(1001, 22, 57),
(1022, 22, 57),
(1029, 22, 57),
(1043, 22, 57),
(1045, 22, 57),
(1055, 23, 57),
(1063, 23, 57),
(1075, 23, 57),
(1076, 23, 57),
(1077, 23, 57),
(1083, 23, 57),
(1093, 23, 57),
(1098, 23, 57),
(1100, 23, 57),
(1108, 24, 58),
(1109, 24, 58),
(1112, 24, 58),
(1140, 24, 58),
(1146, 24, 58),
(1147, 24, 58),
(1168, 25, 58),
(1181, 25, 58),
(1191, 25, 58),
(1225, 26, 58),
(1236, 26, 58),
(1268, 27, 58),
(1271, 27, 58),
(1280, 27, 58),
(1304, 27, 58),
(1315, 28, 58),
(1323, 28, 58),
(1327, 28, 58),
(1328, 28, 58),
(1342, 28, 58),
(1344, 28, 58),
(1390, 29, 58),
(1421, 30, 58),
(1427, 30, 58),
(1428, 30, 58),
(1431, 30, 58),
(1446, 30, 58),
(1452, 30, 58),
(1118, 24, 59),
(1129, 24, 59),
(1132, 24, 59),
(1158, 25, 59),
(1185, 25, 59),
(1201, 25, 59),
(1224, 26, 59),
(1247, 26, 59),
(1303, 27, 59),
(1331, 28, 59),
(1347, 28, 59),
(1351, 28, 59),
(1356, 29, 59),
(1381, 29, 59),
(1384, 29, 59),
(1413, 30, 59),
(1432, 30, 59),
(1101, 23, 60),
(1113, 24, 60),
(1117, 24, 60),
(1166, 25, 60),
(1170, 25, 60),
(1171, 25, 60),
(1179, 25, 60),
(1189, 25, 60),
(1195, 25, 60),
(1205, 25, 60),
(1218, 26, 60),
(1235, 26, 60),
(1237, 26, 60),
(1239, 26, 60),
(1245, 26, 60),
(1254, 26, 60),
(1259, 26, 60),
(1301, 27, 60),
(1319, 28, 60),
(1330, 28, 60),
(1401, 29, 60),
(1114, 24, 61),
(1133, 24, 61),
(1152, 24, 61),
(1154, 25, 61),
(1155, 25, 61),
(1163, 25, 61),
(1199, 25, 61),
(1221, 26, 61),
(1266, 27, 61),
(1269, 27, 61),
(1289, 27, 61),
(1379, 29, 61),
(1391, 29, 61),
(1414, 30, 61),
(1419, 30, 61),
(1426, 30, 61),
(1434, 30, 61),
(1436, 30, 61),
(1444, 30, 61),
(1134, 24, 62),
(1139, 24, 62),
(1161, 25, 62),
(1187, 25, 62),
(1197, 25, 62),
(1202, 25, 62),
(1211, 25, 62),
(1213, 25, 62),
(1227, 26, 62),
(1228, 26, 62),
(1233, 26, 62),
(1242, 26, 62),
(1262, 27, 62),
(1278, 27, 62),
(1284, 27, 62),
(1298, 27, 62),
(1306, 27, 62),
(1311, 27, 62),
(1322, 28, 62),
(1329, 28, 62),
(1333, 28, 62),
(1348, 28, 62),
(1349, 28, 62),
(1363, 29, 62),
(1367, 29, 62),
(1385, 29, 62),
(1393, 29, 62),
(1402, 29, 62),
(1137, 24, 63),
(1150, 24, 63),
(1156, 25, 63),
(1157, 25, 63),
(1159, 25, 63),
(1223, 26, 63),
(1232, 26, 63),
(1251, 26, 63),
(1281, 27, 63),
(1288, 27, 63),
(1312, 28, 63),
(1313, 28, 63),
(1334, 28, 63),
(1339, 28, 63),
(1340, 28, 63),
(1365, 29, 63),
(1386, 29, 63),
(1399, 29, 63),
(1407, 30, 63),
(1175, 25, 64),
(1176, 25, 64),
(1229, 26, 64),
(1240, 26, 64),
(1255, 26, 64),
(1293, 27, 64),
(1309, 27, 64),
(1343, 28, 64),
(1361, 29, 64),
(1368, 29, 64),
(1375, 29, 64),
(1447, 30, 64),
(1116, 24, 65),
(1119, 24, 65),
(1120, 24, 65),
(1142, 24, 65),
(1145, 24, 65),
(1149, 24, 65),
(1153, 25, 65),
(1164, 25, 65),
(1173, 25, 65),
(1204, 25, 65),
(1217, 26, 65),
(1238, 26, 65),
(1248, 26, 65),
(1258, 26, 65),
(1261, 27, 65),
(1270, 27, 65),
(1272, 27, 65),
(1286, 27, 65),
(1305, 27, 65),
(1353, 28, 65),
(1383, 29, 65),
(1387, 29, 65),
(1408, 30, 65),
(1411, 30, 65),
(1442, 30, 65),
(1448, 30, 65),
(1124, 24, 66),
(1126, 24, 66),
(1144, 24, 66),
(1174, 25, 66),
(1198, 25, 66),
(1200, 25, 66),
(1203, 25, 66),
(1208, 25, 66),
(1241, 26, 66),
(1253, 26, 66),
(1257, 26, 66),
(1265, 27, 66),
(1267, 27, 66),
(1274, 27, 66),
(1285, 27, 66),
(1292, 27, 66),
(1310, 27, 66),
(1354, 28, 66),
(1360, 29, 66),
(1373, 29, 66),
(1388, 29, 66),
(1392, 29, 66),
(1423, 30, 66),
(1424, 30, 66),
(1441, 30, 66),
(1103, 23, 67),
(1122, 24, 67),
(1167, 25, 67),
(1186, 25, 67),
(1209, 25, 67),
(1214, 25, 67),
(1263, 27, 67),
(1276, 27, 67),
(1277, 27, 67),
(1291, 27, 67),
(1302, 27, 67),
(1324, 28, 67),
(1378, 29, 67),
(1415, 30, 67),
(1443, 30, 67),
(1449, 30, 67),
(1102, 23, 68),
(1121, 24, 68),
(1182, 25, 68),
(1188, 25, 68),
(1212, 25, 68),
(1226, 26, 68),
(1234, 26, 68),
(1249, 26, 68),
(1279, 27, 68),
(1282, 27, 68),
(1295, 27, 68),
(1296, 27, 68),
(1316, 28, 68),
(1320, 28, 68),
(1321, 28, 68),
(1332, 28, 68),
(1350, 28, 68),
(1362, 29, 68),
(1364, 29, 68),
(1370, 29, 68),
(1374, 29, 68),
(1395, 29, 68),
(1404, 30, 68),
(1405, 30, 68),
(1417, 30, 68),
(1418, 30, 68),
(1437, 30, 68),
(1451, 30, 68),
(1107, 24, 69),
(1110, 24, 69),
(1111, 24, 69),
(1115, 24, 69),
(1127, 24, 69),
(1130, 24, 69),
(1135, 24, 69),
(1141, 24, 69),
(1162, 25, 69),
(1169, 25, 69),
(1177, 25, 69),
(1178, 25, 69),
(1183, 25, 69),
(1184, 25, 69),
(1215, 25, 69),
(1216, 26, 69),
(1220, 26, 69),
(1222, 26, 69),
(1230, 26, 69),
(1246, 26, 69),
(1250, 26, 69),
(1287, 27, 69),
(1294, 27, 69),
(1308, 27, 69),
(1369, 29, 69),
(1380, 29, 69),
(1425, 30, 69),
(1433, 30, 69),
(1435, 30, 69),
(1440, 30, 69),
(1445, 30, 69),
(1104, 24, 70),
(1106, 24, 70),
(1125, 24, 70),
(1128, 24, 70),
(1148, 24, 70),
(1194, 25, 70),
(1219, 26, 70),
(1244, 26, 70),
(1317, 28, 70),
(1358, 29, 70),
(1359, 29, 70),
(1371, 29, 70),
(1396, 29, 70),
(1397, 29, 70),
(1398, 29, 70),
(1400, 29, 70),
(1410, 30, 70),
(1412, 30, 70),
(1136, 24, 71),
(1143, 24, 71),
(1160, 25, 71),
(1192, 25, 71),
(1193, 25, 71),
(1196, 25, 71),
(1206, 25, 71),
(1207, 25, 71),
(1243, 26, 71),
(1273, 27, 71),
(1275, 27, 71),
(1290, 27, 71),
(1300, 27, 71),
(1307, 27, 71),
(1318, 28, 71),
(1335, 28, 71),
(1341, 28, 71),
(1352, 28, 71),
(1355, 29, 71),
(1357, 29, 71),
(1377, 29, 71),
(1389, 29, 71),
(1394, 29, 71),
(1416, 30, 71),
(1420, 30, 71),
(1430, 30, 71),
(1450, 30, 71),
(1105, 24, 72),
(1123, 24, 72),
(1131, 24, 72),
(1138, 24, 72),
(1172, 25, 72),
(1180, 25, 72),
(1190, 25, 72),
(1252, 26, 72),
(1260, 27, 72),
(1297, 27, 72),
(1325, 28, 72),
(1326, 28, 72),
(1338, 28, 72),
(1346, 28, 72),
(1372, 29, 72),
(1376, 29, 72),
(1382, 29, 72),
(1403, 30, 72),
(1409, 30, 72),
(1439, 30, 72),
(1151, 24, 73),
(1165, 25, 73),
(1210, 25, 73),
(1231, 26, 73),
(1256, 26, 73),
(1264, 27, 73),
(1283, 27, 73),
(1299, 27, 73),
(1314, 28, 73),
(1336, 28, 73),
(1337, 28, 73),
(1345, 28, 73),
(1366, 29, 73),
(1406, 30, 73),
(1422, 30, 73),
(1429, 30, 73),
(1438, 30, 73),
(1458, 31, 74),
(1474, 31, 74),
(1476, 31, 74),
(1492, 31, 74),
(1513, 32, 74),
(1531, 32, 74),
(1543, 32, 74),
(1553, 33, 74),
(1576, 33, 74),
(1604, 34, 74),
(1613, 34, 74),
(1636, 35, 74),
(1641, 35, 74),
(1645, 35, 74),
(1651, 35, 74),
(1467, 31, 75),
(1470, 31, 75),
(1482, 31, 75),
(1485, 31, 75),
(1510, 32, 75),
(1511, 32, 75),
(1541, 32, 75),
(1572, 33, 75),
(1597, 34, 75),
(1611, 34, 75),
(1486, 31, 76),
(1501, 32, 76),
(1516, 32, 76),
(1533, 32, 76),
(1544, 32, 76),
(1574, 33, 76),
(1580, 33, 76),
(1591, 33, 76),
(1616, 34, 76),
(1634, 35, 76),
(1642, 35, 76),
(1643, 35, 76),
(1453, 31, 77),
(1475, 31, 77),
(1502, 32, 77),
(1506, 32, 77),
(1514, 32, 77),
(1515, 32, 77),
(1522, 32, 77),
(1527, 32, 77),
(1536, 32, 77),
(1550, 33, 77),
(1567, 33, 77),
(1620, 34, 77),
(1454, 31, 78),
(1483, 31, 78),
(1487, 31, 78),
(1499, 32, 78),
(1534, 32, 78),
(1548, 33, 78),
(1554, 33, 78),
(1584, 33, 78),
(1603, 34, 78),
(1607, 34, 78),
(1619, 34, 78),
(1631, 35, 78),
(1640, 35, 78),
(1650, 35, 78),
(1463, 31, 79),
(1464, 31, 79),
(1472, 31, 79),
(1478, 31, 79),
(1508, 32, 79),
(1520, 32, 79),
(1547, 33, 79),
(1559, 33, 79),
(1569, 33, 79),
(1606, 34, 79),
(1457, 31, 80),
(1489, 31, 80),
(1496, 31, 80),
(1500, 32, 80),
(1509, 32, 80),
(1552, 33, 80),
(1558, 33, 80),
(1589, 33, 80),
(1600, 34, 80),
(1602, 34, 80),
(1614, 34, 80),
(1621, 34, 80),
(1647, 35, 80),
(1494, 31, 81),
(1505, 32, 81),
(1512, 32, 81),
(1518, 32, 81),
(1524, 32, 81),
(1525, 32, 81),
(1571, 33, 81),
(1577, 33, 81),
(1579, 33, 81),
(1586, 33, 81),
(1588, 33, 81),
(1595, 34, 81),
(1615, 34, 81),
(1623, 34, 81),
(1624, 34, 81),
(1629, 34, 81),
(1632, 35, 81),
(1652, 35, 81),
(1456, 31, 82),
(1465, 31, 82),
(1469, 31, 82),
(1519, 32, 82),
(1529, 32, 82),
(1532, 32, 82),
(1539, 32, 82),
(1556, 33, 82),
(1575, 33, 82),
(1626, 34, 82),
(1627, 34, 82),
(1481, 31, 83),
(1521, 32, 83),
(1542, 32, 83),
(1549, 33, 83),
(1583, 33, 83),
(1593, 34, 83),
(1618, 34, 83),
(1644, 35, 83),
(1648, 35, 83),
(1479, 31, 84),
(1488, 31, 84),
(1497, 31, 84),
(1523, 32, 84),
(1537, 32, 84),
(1540, 32, 84),
(1551, 33, 84),
(1557, 33, 84),
(1560, 33, 84),
(1563, 33, 84),
(1455, 31, 85),
(1480, 31, 85),
(1491, 31, 85),
(1503, 32, 85),
(1538, 32, 85),
(1561, 33, 85),
(1578, 33, 85),
(1601, 34, 85),
(1610, 34, 85),
(1612, 34, 85),
(1639, 35, 85),
(1468, 31, 86),
(1471, 31, 86),
(1484, 31, 86),
(1564, 33, 86),
(1565, 33, 86),
(1570, 33, 86),
(1573, 33, 86),
(1582, 33, 86),
(1587, 33, 86),
(1608, 34, 86),
(1630, 34, 86),
(1653, 35, 86),
(1459, 31, 87),
(1461, 31, 87),
(1477, 31, 87),
(1490, 31, 87),
(1504, 32, 87),
(1566, 33, 87),
(1596, 34, 87),
(1609, 34, 87),
(1495, 31, 88),
(1507, 32, 88),
(1526, 32, 88),
(1535, 32, 88),
(1568, 33, 88),
(1594, 34, 88),
(1605, 34, 88),
(1617, 34, 88),
(1625, 34, 88),
(1649, 35, 88),
(1460, 31, 89),
(1493, 31, 89),
(1498, 32, 89),
(1528, 32, 89),
(1546, 32, 89),
(1585, 33, 89),
(1590, 33, 89),
(1592, 34, 89),
(1622, 34, 89),
(1635, 35, 89),
(1462, 31, 90),
(1466, 31, 90),
(1473, 31, 90),
(1517, 32, 90),
(1530, 32, 90),
(1545, 32, 90),
(1555, 33, 90),
(1562, 33, 90),
(1581, 33, 90),
(1598, 34, 90),
(1599, 34, 90),
(1628, 34, 90),
(1633, 35, 90),
(1637, 35, 90),
(1638, 35, 90),
(1646, 35, 90),
(1655, 35, 91),
(1672, 35, 91),
(1688, 36, 91),
(1716, 36, 91),
(1726, 36, 91),
(1739, 37, 91),
(1758, 37, 91),
(1770, 38, 91),
(1772, 38, 91),
(1781, 38, 91),
(1803, 38, 91),
(1817, 38, 91),
(1833, 39, 91),
(1877, 40, 91),
(1884, 40, 91),
(1893, 40, 91),
(1898, 40, 91),
(1671, 35, 92),
(1673, 35, 92),
(1683, 35, 92),
(1702, 36, 92),
(1710, 36, 92),
(1714, 36, 92),
(1715, 36, 92),
(1728, 36, 92),
(1737, 37, 92),
(1747, 37, 92),
(1760, 37, 92),
(1769, 38, 92),
(1779, 38, 92),
(1780, 38, 92),
(1784, 38, 92),
(1785, 38, 92),
(1793, 38, 92),
(1805, 38, 92),
(1835, 39, 92),
(1844, 39, 92),
(1848, 39, 92),
(1852, 39, 92),
(1876, 40, 92),
(1656, 35, 93),
(1661, 35, 93),
(1662, 35, 93),
(1666, 35, 93),
(1686, 36, 93),
(1690, 36, 93),
(1691, 36, 93),
(1704, 36, 93),
(1705, 36, 93),
(1735, 37, 93),
(1759, 37, 93),
(1764, 37, 93),
(1782, 38, 93),
(1800, 38, 93),
(1801, 38, 93),
(1808, 38, 93),
(1830, 39, 93),
(1856, 39, 93),
(1868, 40, 93),
(1892, 40, 93),
(1899, 40, 93),
(1676, 35, 94),
(1678, 35, 94),
(1681, 35, 94),
(1682, 35, 94),
(1687, 36, 94),
(1689, 36, 94),
(1694, 36, 94),
(1695, 36, 94),
(1700, 36, 94),
(1701, 36, 94),
(1731, 36, 94),
(1743, 37, 94),
(1752, 37, 94),
(1753, 37, 94),
(1757, 37, 94),
(1774, 38, 94),
(1777, 38, 94),
(1791, 38, 94),
(1798, 38, 94),
(1804, 38, 94),
(1809, 38, 94),
(1819, 39, 94),
(1825, 39, 94),
(1826, 39, 94),
(1831, 39, 94),
(1832, 39, 94),
(1834, 39, 94),
(1837, 39, 94),
(1838, 39, 94),
(1866, 40, 94),
(1867, 40, 94),
(1873, 40, 94),
(1658, 35, 95),
(1663, 35, 95),
(1664, 35, 95),
(1677, 35, 95),
(1684, 35, 95),
(1696, 36, 95),
(1698, 36, 95),
(1711, 36, 95),
(1720, 36, 95),
(1725, 36, 95),
(1727, 36, 95),
(1732, 36, 95),
(1738, 37, 95),
(1762, 37, 95),
(1767, 38, 95),
(1783, 38, 95),
(1796, 38, 95),
(1799, 38, 95),
(1810, 38, 95),
(1813, 38, 95),
(1818, 38, 95),
(1870, 40, 95),
(1879, 40, 95),
(1885, 40, 95),
(1894, 40, 95),
(1660, 35, 96),
(1667, 35, 96),
(1723, 36, 96),
(1724, 36, 96),
(1729, 36, 96),
(1751, 37, 96),
(1766, 37, 96),
(1768, 38, 96),
(1771, 38, 96),
(1790, 38, 96),
(1802, 38, 96),
(1807, 38, 96),
(1812, 38, 96),
(1829, 39, 96),
(1840, 39, 96),
(1843, 39, 96),
(1849, 39, 96),
(1851, 39, 96),
(1854, 39, 96),
(1871, 40, 96),
(1880, 40, 96),
(1891, 40, 96),
(1900, 40, 96),
(1657, 35, 97),
(1659, 35, 97),
(1665, 35, 97),
(1680, 35, 97),
(1697, 36, 97),
(1703, 36, 97),
(1712, 36, 97),
(1719, 36, 97),
(1721, 36, 97),
(1745, 37, 97),
(1763, 37, 97),
(1776, 38, 97),
(1778, 38, 97),
(1816, 38, 97),
(1845, 39, 97),
(1846, 39, 97),
(1869, 40, 97),
(1881, 40, 97),
(1889, 40, 97),
(1890, 40, 97),
(1668, 35, 98),
(1669, 35, 98),
(1674, 35, 98),
(1692, 36, 98),
(1693, 36, 98),
(1699, 36, 98),
(1706, 36, 98),
(1707, 36, 98),
(1708, 36, 98),
(1713, 36, 98),
(1722, 36, 98),
(1733, 37, 98),
(1734, 37, 98),
(1736, 37, 98),
(1744, 37, 98),
(1754, 37, 98),
(1761, 37, 98),
(1786, 38, 98),
(1787, 38, 98),
(1795, 38, 98),
(1820, 39, 98),
(1821, 39, 98),
(1823, 39, 98),
(1839, 39, 98),
(1841, 39, 98),
(1855, 39, 98),
(1883, 40, 98),
(1888, 40, 98),
(1895, 40, 98),
(1670, 35, 99),
(1679, 35, 99),
(1685, 36, 99),
(1718, 36, 99),
(1740, 37, 99),
(1746, 37, 99),
(1749, 37, 99),
(1773, 38, 99),
(1775, 38, 99),
(1797, 38, 99),
(1806, 38, 99),
(1811, 38, 99),
(1815, 38, 99),
(1824, 39, 99),
(1842, 39, 99),
(1850, 39, 99),
(1872, 40, 99),
(1874, 40, 99),
(1875, 40, 99),
(1878, 40, 99),
(1887, 40, 99),
(1654, 35, 100),
(1675, 35, 100),
(1709, 36, 100),
(1717, 36, 100),
(1730, 36, 100),
(1741, 37, 100),
(1742, 37, 100),
(1748, 37, 100),
(1750, 37, 100),
(1755, 37, 100),
(1756, 37, 100),
(1765, 37, 100),
(1788, 38, 100),
(1789, 38, 100),
(1792, 38, 100),
(1794, 38, 100),
(1814, 38, 100),
(1822, 39, 100),
(1827, 39, 100),
(1828, 39, 100),
(1836, 39, 100),
(1847, 39, 100),
(1853, 39, 100),
(1865, 40, 100),
(1882, 40, 100),
(1886, 40, 100),
(1896, 40, 100),
(1897, 40, 100),
(1914, 40, 100),
(1915, 40, 100),
(1923, 40, 100),
(1929, 41, 100),
(1939, 41, 100),
(1943, 41, 100),
(1905, 40, 101),
(1924, 40, 101),
(1930, 41, 101),
(1931, 41, 101),
(1941, 41, 101),
(1944, 41, 101),
(1957, 41, 101),
(1961, 41, 101),
(1971, 41, 101),
(1981, 42, 101),
(1986, 42, 101),
(2002, 42, 101),
(2004, 42, 101),
(2011, 42, 101),
(2015, 42, 101),
(2016, 42, 101),
(1908, 40, 102),
(1911, 40, 102),
(1913, 40, 102),
(1925, 41, 102),
(1955, 41, 102),
(1969, 41, 102),
(1994, 42, 102),
(2003, 42, 102),
(1926, 41, 103),
(1938, 41, 103),
(1947, 41, 103),
(1950, 41, 103),
(1967, 41, 103),
(1995, 42, 103),
(1997, 42, 103),
(2012, 42, 103),
(1904, 40, 104),
(1906, 40, 104),
(1937, 41, 104),
(1952, 41, 104),
(1953, 41, 104),
(1965, 41, 104),
(1970, 41, 104),
(1983, 42, 104),
(1989, 42, 104),
(1996, 42, 104),
(2000, 42, 104),
(2020, 42, 104),
(1902, 40, 105),
(1907, 40, 105),
(1927, 41, 105),
(1951, 41, 105),
(1962, 41, 105),
(1984, 42, 105),
(1985, 42, 105),
(1990, 42, 105),
(1998, 42, 105),
(2007, 42, 105),
(2010, 42, 105),
(2014, 42, 105),
(2021, 42, 105),
(1909, 40, 106),
(1932, 41, 106),
(1934, 41, 106),
(1982, 42, 106),
(1987, 42, 106),
(1991, 42, 106),
(1993, 42, 106),
(1999, 42, 106),
(2006, 42, 106),
(2018, 42, 106),
(1928, 41, 107),
(1936, 41, 107),
(1942, 41, 107),
(1945, 41, 107),
(1964, 41, 107),
(1992, 42, 107),
(1901, 40, 108),
(1912, 40, 108),
(1948, 41, 108),
(1960, 41, 108),
(1966, 41, 108),
(2001, 42, 108),
(2009, 42, 108),
(2013, 42, 108),
(1903, 40, 109),
(1910, 40, 109),
(1933, 41, 109),
(1935, 41, 109),
(1940, 41, 109),
(1946, 41, 109),
(1949, 41, 109),
(1954, 41, 109),
(1956, 41, 109),
(1958, 41, 109),
(1959, 41, 109),
(1963, 41, 109),
(1968, 41, 109),
(1988, 42, 109),
(2005, 42, 109),
(2008, 42, 109),
(2017, 42, 109),
(2019, 42, 109);

-- --------------------------------------------------------

--
-- Struttura della tabella `FASEPRODUTTIVA`
--

CREATE TABLE `FASEPRODUTTIVA` (
  `CodFase` varchar(4) NOT NULL,
  `TemperaturaLavorazione` int(2) NOT NULL,
  `DurataLavorazione` time NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

--
-- Dump dei dati per la tabella `FASEPRODUTTIVA`
--

INSERT INTO `FASEPRODUTTIVA` (`CodFase`, `TemperaturaLavorazione`, `DurataLavorazione`) VALUES
('E001', 75, '23:00:00'),
('E002', 78, '22:00:00'),
('E003', 65, '20:00:00'),
('E004', 79, '21:00:00'),
('I001', 30, '03:00:00'),
('I002', 32, '04:00:00'),
('I003', 34, '02:00:00'),
('I004', 35, '06:00:00'),
('S001', 35, '10:00:00'),
('T001', 25, '02:00:00'),
('T002', 26, '03:00:00'),
('T003', 28, '01:00:00'),
('T004', 24, '02:00:00'),
('T005', 24, '02:00:00'),
('T006', 26, '03:00:00'),
('T007', 29, '02:00:00'),
('T008', 25, '04:00:00'),
('T009', 25, '03:00:00'),
('T010', 24, '04:00:00');

-- --------------------------------------------------------

--
-- Struttura della tabella `fatturaN`
--

CREATE TABLE `fatturaN` (
  `NumOrdine` int(11) NOT NULL,
  `DataPagamento` date DEFAULT NULL,
  `CodNegozio` varchar(6) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

--
-- Dump dei dati per la tabella `fatturaN`
--

INSERT INTO `fatturaN` (`NumOrdine`, `DataPagamento`, `CodNegozio`) VALUES
(1, '2017-02-06', 'N00003'),
(2, '2017-02-15', 'N00001'),
(3, '2017-03-11', 'N00019'),
(4, '2017-03-07', 'N00014'),
(5, '2017-03-23', 'N00024'),
(6, '2017-04-11', 'N00022'),
(7, '2017-04-07', 'N00031'),
(8, '2017-04-21', 'N00028'),
(10, '2017-04-27', 'N00026'),
(11, '2017-05-08', 'N00027'),
(12, '2017-05-13', 'N00028'),
(13, '2017-06-13', 'N00032'),
(14, '2017-06-16', 'N00016'),
(15, '2017-06-05', 'N00017'),
(17, '2017-06-25', 'N00019'),
(18, '2017-07-05', 'N00001'),
(19, '2017-07-15', 'N00031'),
(20, '2017-07-22', 'N00028'),
(22, '2017-08-21', 'N00031'),
(23, '2017-08-20', 'N00006'),
(24, '2017-08-19', 'N00004'),
(25, '2017-08-18', 'N00016'),
(27, '2017-09-06', 'N00018'),
(28, '2017-09-07', 'N00015'),
(29, '2017-10-13', 'N00022'),
(30, '2017-09-26', 'N00020'),
(32, '2017-10-17', 'N00003'),
(33, '2017-11-04', 'N00025'),
(36, '2018-06-25', 'N00021'),
(38, '2018-07-15', 'N00013'),
(39, '2018-06-24', 'N00024'),
(40, '2018-06-26', 'N00032'),
(41, '2018-07-11', 'N00006'),
(42, '2018-07-07', 'N00022'),
(43, '2018-07-25', 'N00029'),
(44, '2018-08-03', 'N00027'),
(45, '2018-08-14', 'N00011'),
(49, '2018-08-19', 'N00028'),
(50, '2018-09-04', 'N00028'),
(51, '2018-08-30', 'N00003'),
(52, '2018-09-23', 'N00004'),
(53, '2018-10-08', 'N00010'),
(56, '2018-11-03', 'N00028'),
(57, '2018-10-19', 'N00011'),
(59, '2018-11-15', 'N00026'),
(60, '2018-11-10', 'N00017'),
(62, '2018-11-09', 'N00018'),
(63, '2018-11-29', 'N00023'),
(64, '2018-11-28', 'N00006'),
(65, '2018-12-16', 'N00003'),
(66, '2018-12-06', 'N00022'),
(67, '2018-12-12', 'N00017'),
(68, '2018-12-17', 'N00010'),
(70, '2019-01-02', 'N00017'),
(71, '2019-01-17', 'N00011'),
(72, '2019-01-13', 'N00007'),
(73, '2019-02-08', 'N00004'),
(75, '2019-06-28', 'N00005'),
(76, '2019-07-10', 'N00008'),
(77, '2019-06-22', 'N00018'),
(79, '2019-07-16', 'N00017'),
(80, '2019-07-25', 'N00028'),
(81, '2019-08-01', 'N00026'),
(83, '2019-07-29', 'N00004'),
(85, '2019-08-14', 'N00001'),
(86, '2019-09-09', 'N00030'),
(87, '2019-08-30', 'N00013'),
(89, '2019-09-12', 'N00009'),
(90, '2019-09-26', 'N00017'),
(91, '2019-09-20', 'N00032'),
(92, '2019-10-06', 'N00004'),
(93, '2019-10-17', 'N00010'),
(95, '2019-10-05', 'N00001'),
(97, '2019-11-01', 'N00011'),
(98, NULL, 'N00026'),
(100, NULL, 'N00015'),
(102, NULL, 'N00017'),
(103, NULL, 'N00015'),
(104, NULL, 'N00025'),
(105, NULL, 'N00015'),
(106, NULL, 'N00002'),
(107, NULL, 'N00012'),
(108, NULL, 'N00012');

-- --------------------------------------------------------

--
-- Struttura della tabella `fatturaR`
--

CREATE TABLE `fatturaR` (
  `NumOrdine` int(11) NOT NULL,
  `DataPagamento` date DEFAULT NULL,
  `CodRistorante` varchar(6) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

--
-- Dump dei dati per la tabella `fatturaR`
--

INSERT INTO `fatturaR` (`NumOrdine`, `DataPagamento`, `CodRistorante`) VALUES
(9, '2017-04-30', 'R00004'),
(16, '2017-06-23', 'R00005'),
(21, '2017-07-29', 'R00001'),
(26, '2017-08-24', 'R00007'),
(31, '2017-10-03', 'R00003'),
(34, '2017-10-19', 'R00004'),
(35, '2017-10-19', 'R00002'),
(37, '2018-07-02', 'R00006'),
(46, '2018-08-11', 'R00002'),
(47, '2018-08-19', 'R00003'),
(48, '2018-09-11', 'R00007'),
(54, '2018-10-02', 'R00007'),
(55, '2018-10-08', 'R00001'),
(58, '2018-11-14', 'R00005'),
(61, '2018-11-23', 'R00004'),
(69, '2018-12-23', 'R00006'),
(74, '2019-06-15', 'R00001'),
(78, '2019-07-06', 'R00004'),
(82, '2019-08-10', 'R00007'),
(84, '2019-08-19', 'R00006'),
(88, '2019-09-18', 'R00006'),
(94, '2019-10-22', 'R00004'),
(96, '2019-10-08', 'R00005'),
(99, NULL, 'R00006'),
(101, NULL, 'R00001'),
(109, NULL, 'R00005');

-- --------------------------------------------------------

--
-- Struttura stand-in per le viste `FatturatoNegozi`
-- (Vedi sotto per la vista effettiva)
--
CREATE TABLE `FatturatoNegozi` (
`CodNegozio` varchar(6)
,`Nome` varchar(50)
,`Indirizzo` varchar(50)
,`Citta` varchar(50)
,`Stato` varchar(50)
,`Fatturato` double
);

-- --------------------------------------------------------

--
-- Struttura stand-in per le viste `FatturatoRistoranti`
-- (Vedi sotto per la vista effettiva)
--
CREATE TABLE `FatturatoRistoranti` (
`CodRistorante` varchar(6)
,`Nome` varchar(50)
,`Indirizzo` varchar(50)
,`Stato` varchar(50)
,`Fatturato` double
);

-- --------------------------------------------------------

--
-- Struttura stand-in per le viste `FatturePendenti`
-- (Vedi sotto per la vista effettiva)
--
CREATE TABLE `FatturePendenti` (
`CodNegozio` varchar(6)
,`Nome` varchar(50)
,`NumFatture` bigint(21)
,`TotImporto` double
);

-- --------------------------------------------------------

--
-- Struttura della tabella `FORNITORE`
--

CREATE TABLE `FORNITORE` (
  `CodFornitore` int(11) NOT NULL,
  `NomeSocieta` varchar(50) NOT NULL,
  `Indirizzo` varchar(200) NOT NULL,
  `Telefono` varchar(20) NOT NULL,
  `Citta` varchar(50) NOT NULL,
  `Regione` varchar(100) NOT NULL,
  `Stato` varchar(50) NOT NULL DEFAULT 'Italia'
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

--
-- Dump dei dati per la tabella `FORNITORE`
--

INSERT INTO `FORNITORE` (`CodFornitore`, `NomeSocieta`, `Indirizzo`, `Telefono`, `Citta`, `Regione`, `Stato`) VALUES
(1, 'Sementi e frumenti S.r.l.', 'Via dell\'Industria, 10', '049104567', 'Padova', 'Veneto', 'Italia'),
(2, 'Fratelli Coselli S.n.c.', 'Viale dell\'artigianato, 25', '02768920', 'Milano', 'Lombardia', 'Italia'),
(3, 'Granopolis S.p.A.', 'Via Foggia, 86', '080989765', 'Bari', 'Puglia', 'Italia'),
(4, 'Barkley Seed, Inc.', '1661 E 20th St', '9287822591', 'Yuma', 'Arizona', 'Stati Uniti d\'America');

-- --------------------------------------------------------

--
-- Struttura della tabella `FORNITURA`
--

CREATE TABLE `FORNITURA` (
  `CodFornitore` int(11) NOT NULL,
  `Varieta` varchar(20) NOT NULL,
  `DataFornitura` date NOT NULL,
  `DataFattura` date DEFAULT NULL,
  `Peso` float NOT NULL COMMENT 'In Kg',
  `Spesa` float NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

--
-- Dump dei dati per la tabella `FORNITURA`
--

INSERT INTO `FORNITURA` (`CodFornitore`, `Varieta`, `DataFornitura`, `DataFattura`, `Peso`, `Spesa`) VALUES
(1, 'Colosseo', '2018-02-21', '2018-02-28', 5000, 520),
(1, 'Colosseo', '2019-02-22', '2019-02-28', 5000, 540),
(1, 'Iride', '2017-01-11', '2017-01-30', 4000, 450),
(1, 'Marco Aurelio', '2017-01-12', '2017-01-30', 5000, 500),
(1, 'Marco Aurelio', '2018-02-21', '2018-02-28', 5000, 570),
(1, 'Marco Aurelio', '2019-02-22', '2019-02-28', 5000, 590),
(1, 'Senatore Cappelli', '2017-02-20', '2017-02-28', 5000, 550),
(2, 'Colosseo', '2017-01-10', '2017-01-30', 3000, 450),
(2, 'Colosseo', '2018-01-13', '2018-01-30', 3000, 620),
(2, 'Colosseo', '2019-01-14', '2019-01-30', 3000, 640),
(2, 'Iride', '2018-01-13', '2018-01-30', 5000, 520),
(2, 'Iride', '2018-02-21', '2018-02-28', 4000, 620),
(2, 'Iride', '2019-01-14', '2019-01-30', 5000, 540),
(2, 'Iride', '2019-02-22', '2019-02-28', 4000, 640),
(2, 'Russello', '2017-02-20', '2017-02-28', 5000, 500),
(3, 'Russello', '2017-02-20', '2017-02-28', 4000, 600),
(3, 'Russello', '2018-01-12', '2018-01-30', 4000, 470),
(3, 'Russello', '2019-01-13', '2019-01-30', 4000, 490),
(4, 'Desert Durum', '2017-01-13', '2017-01-30', 3000, 600),
(4, 'Desert Durum', '2018-01-11', '2018-01-30', 3000, 470),
(4, 'Desert Durum', '2019-01-12', '2019-01-30', 3000, 490);

-- --------------------------------------------------------

--
-- Struttura della tabella `GRANO`
--

CREATE TABLE `GRANO` (
  `Varieta` varchar(20) NOT NULL,
  `NomeCommerciale` varchar(50) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

--
-- Dump dei dati per la tabella `GRANO`
--

INSERT INTO `GRANO` (`Varieta`, `NomeCommerciale`) VALUES
('Colosseo', ''),
('Desert Durum', ''),
('Iride', ''),
('Khorasan', 'Kamut'),
('Marco Aurelio', ''),
('Russello', ''),
('Senatore Cappelli', '');

-- --------------------------------------------------------

--
-- Struttura della tabella `lavorazione`
--

CREATE TABLE `lavorazione` (
  `CodLotto` int(11) NOT NULL,
  `CodFase` varchar(4) NOT NULL,
  `DataOraInizio` datetime DEFAULT CURRENT_TIMESTAMP,
  `DataOraFine` datetime DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

--
-- Dump dei dati per la tabella `lavorazione`
--

INSERT INTO `lavorazione` (`CodLotto`, `CodFase`, `DataOraInizio`, `DataOraFine`) VALUES
(1, 'E004', '2017-06-07 20:00:00', '2017-06-08 17:00:00'),
(1, 'I004', '2017-06-07 12:00:00', '2017-06-07 18:00:00'),
(1, 'S001', '2017-06-08 17:00:00', '2017-06-09 03:00:00'),
(1, 'T001', '2017-06-07 18:00:00', '2017-06-07 20:00:00'),
(2, 'E003', '2017-06-23 18:00:00', '2017-06-24 14:00:00'),
(2, 'I003', '2017-06-23 12:00:00', '2017-06-23 14:00:00'),
(2, 'S001', '2017-06-24 14:00:00', '2017-06-25 00:00:00'),
(2, 'T008', '2017-06-23 14:00:00', '2017-06-23 18:00:00'),
(3, 'E003', '2017-06-26 18:00:00', '2017-06-27 14:00:00'),
(3, 'I003', '2017-06-26 12:00:00', '2017-06-26 14:00:00'),
(3, 'S001', '2017-06-27 14:00:00', '2017-06-28 00:00:00'),
(3, 'T008', '2017-06-26 14:00:00', '2017-06-26 18:00:00'),
(4, 'E002', '2017-07-08 18:00:00', '2017-07-09 16:00:00'),
(4, 'I002', '2017-07-08 12:00:00', '2017-07-08 16:00:00'),
(4, 'S001', '2017-07-09 16:00:00', '2017-07-10 02:00:00'),
(4, 'T007', '2017-07-08 16:00:00', '2017-07-08 18:00:00'),
(5, 'E002', '2017-07-18 19:00:00', '2017-07-19 17:00:00'),
(5, 'I002', '2017-07-18 12:00:00', '2017-07-18 16:00:00'),
(5, 'S001', '2017-07-19 17:00:00', '2017-07-20 03:00:00'),
(5, 'T009', '2017-07-18 16:00:00', '2017-07-18 19:00:00'),
(6, 'E001', '2017-08-08 18:00:00', '2017-08-09 17:00:00'),
(6, 'I001', '2017-08-08 12:00:00', '2017-08-08 15:00:00'),
(6, 'S001', '2017-08-09 17:00:00', '2017-08-10 03:00:00'),
(6, 'T006', '2017-08-08 15:00:00', '2017-08-08 18:00:00'),
(7, 'E001', '2017-08-25 18:00:00', '2017-08-26 17:00:00'),
(7, 'I001', '2017-08-25 12:00:00', '2017-08-25 15:00:00'),
(7, 'S001', '2017-08-26 17:00:00', '2017-08-27 03:00:00'),
(7, 'T006', '2017-08-25 15:00:00', '2017-08-25 18:00:00'),
(8, 'E002', '2017-08-27 19:00:00', '2017-08-28 17:00:00'),
(8, 'I002', '2017-08-27 12:00:00', '2017-08-27 16:00:00'),
(8, 'S001', '2017-08-28 17:00:00', '2017-08-29 03:00:00'),
(8, 'T009', '2017-08-27 16:00:00', '2017-08-27 19:00:00'),
(9, 'E004', '2017-09-14 20:00:00', '2017-09-15 17:00:00'),
(9, 'I004', '2017-09-14 12:00:00', '2017-09-14 18:00:00'),
(9, 'S001', '2017-09-15 17:00:00', '2017-09-16 03:00:00'),
(9, 'T004', '2017-09-14 18:00:00', '2017-09-14 20:00:00'),
(10, 'E002', '2017-09-28 19:00:00', '2017-09-29 17:00:00'),
(10, 'I002', '2017-09-28 12:00:00', '2017-09-28 16:00:00'),
(10, 'S001', '2017-09-29 17:00:00', '2017-09-30 03:00:00'),
(10, 'T009', '2017-09-28 16:00:00', '2017-09-28 19:00:00'),
(11, 'E001', '2017-10-09 18:00:00', '2017-10-10 17:00:00'),
(11, 'I001', '2017-10-09 12:00:00', '2017-10-09 15:00:00'),
(11, 'S001', '2017-10-10 17:00:00', '2017-10-11 03:00:00'),
(11, 'T006', '2017-10-09 15:00:00', '2017-10-09 18:00:00'),
(12, 'E001', '2017-10-11 18:00:00', '2017-10-12 17:00:00'),
(12, 'I001', '2017-10-11 12:00:00', '2017-10-11 15:00:00'),
(12, 'S001', '2017-10-12 17:00:00', '2017-10-13 03:00:00'),
(12, 'T006', '2017-10-11 15:00:00', '2017-10-11 18:00:00'),
(13, 'E002', '2017-10-20 18:00:00', '2017-10-21 16:00:00'),
(13, 'I002', '2017-10-20 12:00:00', '2017-10-20 16:00:00'),
(13, 'S001', '2017-10-21 16:00:00', '2017-10-22 02:00:00'),
(13, 'T007', '2017-10-20 16:00:00', '2017-10-20 18:00:00'),
(14, 'E001', '2017-10-26 18:00:00', '2017-10-27 17:00:00'),
(14, 'I001', '2017-10-26 12:00:00', '2017-10-26 15:00:00'),
(14, 'S001', '2017-10-27 17:00:00', '2017-10-28 03:00:00'),
(14, 'T002', '2017-10-26 15:00:00', '2017-10-26 18:00:00'),
(15, 'E004', '2017-11-09 20:00:00', '2017-11-10 17:00:00'),
(15, 'I004', '2017-11-09 12:00:00', '2017-11-09 18:00:00'),
(15, 'S001', '2017-11-10 17:00:00', '2017-11-11 03:00:00'),
(15, 'T001', '2017-11-09 18:00:00', '2017-11-09 20:00:00'),
(16, 'E002', '2018-06-12 19:00:00', '2018-06-13 17:00:00'),
(16, 'I002', '2018-06-12 12:00:00', '2018-06-12 16:00:00'),
(16, 'S001', '2018-06-13 17:00:00', '2018-06-14 03:00:00'),
(16, 'T009', '2018-06-12 16:00:00', '2018-06-12 19:00:00'),
(17, 'E004', '2018-06-30 20:00:00', '2018-07-01 17:00:00'),
(17, 'I004', '2018-06-30 12:00:00', '2018-06-30 18:00:00'),
(17, 'S001', '2018-07-01 17:00:00', '2018-07-02 03:00:00'),
(17, 'T004', '2018-06-30 18:00:00', '2018-06-30 20:00:00'),
(18, 'E001', '2018-07-20 18:00:00', '2018-07-21 17:00:00'),
(18, 'I001', '2018-07-20 12:00:00', '2018-07-20 15:00:00'),
(18, 'S001', '2018-07-21 17:00:00', '2018-07-22 03:00:00'),
(18, 'T006', '2018-07-20 15:00:00', '2018-07-20 18:00:00'),
(19, 'E002', '2018-08-04 18:00:00', '2018-08-05 16:00:00'),
(19, 'I002', '2018-08-04 12:00:00', '2018-08-04 16:00:00'),
(19, 'S001', '2018-08-05 16:00:00', '2018-08-06 02:00:00'),
(19, 'T007', '2018-08-04 16:00:00', '2018-08-04 18:00:00'),
(20, 'E004', '2018-08-14 20:00:00', '2018-08-15 17:00:00'),
(20, 'I004', '2018-08-14 12:00:00', '2018-08-14 18:00:00'),
(20, 'S001', '2018-08-15 17:00:00', '2018-08-16 03:00:00'),
(20, 'T004', '2018-08-14 18:00:00', '2018-08-14 20:00:00'),
(21, 'E003', '2018-08-20 15:00:00', '2018-08-21 11:00:00'),
(21, 'I003', '2018-08-20 12:00:00', '2018-08-20 14:00:00'),
(21, 'S001', '2018-08-21 11:00:00', '2018-08-21 21:00:00'),
(21, 'T003', '2018-08-20 14:00:00', '2018-08-20 15:00:00'),
(22, 'E004', '2018-08-30 20:00:00', '2018-08-31 17:00:00'),
(22, 'I004', '2018-08-30 12:00:00', '2018-08-30 18:00:00'),
(22, 'S001', '2018-08-31 17:00:00', '2018-09-01 03:00:00'),
(22, 'T004', '2018-08-30 18:00:00', '2018-08-30 20:00:00'),
(23, 'E004', '2018-09-07 20:00:00', '2018-09-08 17:00:00'),
(23, 'I004', '2018-09-07 12:00:00', '2018-09-07 18:00:00'),
(23, 'S001', '2018-09-08 17:00:00', '2018-09-09 03:00:00'),
(23, 'T004', '2018-09-07 18:00:00', '2018-09-07 20:00:00'),
(24, 'E003', '2018-09-12 18:00:00', '2018-09-13 14:00:00'),
(24, 'I003', '2018-09-12 12:00:00', '2018-09-12 14:00:00'),
(24, 'S001', '2018-09-13 14:00:00', '2018-09-14 00:00:00'),
(24, 'T008', '2018-09-12 14:00:00', '2018-09-12 18:00:00'),
(25, 'E001', '2018-09-21 18:00:00', '2018-09-22 17:00:00'),
(25, 'I001', '2018-09-21 12:00:00', '2018-09-21 15:00:00'),
(25, 'S001', '2018-09-22 17:00:00', '2018-09-23 03:00:00'),
(25, 'T002', '2018-09-21 15:00:00', '2018-09-21 18:00:00'),
(26, 'E002', '2018-10-03 18:00:00', '2018-10-04 16:00:00'),
(26, 'I002', '2018-10-03 12:00:00', '2018-10-03 16:00:00'),
(26, 'S001', '2018-10-04 16:00:00', '2018-10-05 02:00:00'),
(26, 'T005', '2018-10-03 16:00:00', '2018-10-03 18:00:00'),
(27, 'E004', '2018-10-10 20:00:00', '2018-10-11 17:00:00'),
(27, 'I004', '2018-10-10 12:00:00', '2018-10-10 18:00:00'),
(27, 'S001', '2018-10-11 17:00:00', '2018-10-12 03:00:00'),
(27, 'T004', '2018-10-10 18:00:00', '2018-10-10 20:00:00'),
(28, 'E003', '2018-10-24 15:00:00', '2018-10-25 11:00:00'),
(28, 'I003', '2018-10-24 12:00:00', '2018-10-24 14:00:00'),
(28, 'S001', '2018-10-25 11:00:00', '2018-10-25 21:00:00'),
(28, 'T003', '2018-10-24 14:00:00', '2018-10-24 15:00:00'),
(29, 'E002', '2018-10-27 18:00:00', '2018-10-28 16:00:00'),
(29, 'I002', '2018-10-27 12:00:00', '2018-10-27 16:00:00'),
(29, 'S001', '2018-10-28 16:00:00', '2018-10-29 02:00:00'),
(29, 'T005', '2018-10-27 16:00:00', '2018-10-27 18:00:00'),
(30, 'E001', '2018-11-15 18:00:00', '2018-11-16 17:00:00'),
(30, 'I001', '2018-11-15 12:00:00', '2018-11-15 15:00:00'),
(30, 'S001', '2018-11-16 17:00:00', '2018-11-17 03:00:00'),
(30, 'T002', '2018-11-15 15:00:00', '2018-11-15 18:00:00'),
(31, 'E002', '2019-06-09 18:00:00', '2019-06-10 16:00:00'),
(31, 'I002', '2019-06-09 12:00:00', '2019-06-09 16:00:00'),
(31, 'S001', '2019-06-10 16:00:00', '2019-06-11 02:00:00'),
(31, 'T005', '2019-06-09 16:00:00', '2019-06-09 18:00:00'),
(32, 'E002', '2019-06-28 19:00:00', '2019-06-29 17:00:00'),
(32, 'I002', '2019-06-28 12:00:00', '2019-06-28 16:00:00'),
(32, 'S001', '2019-06-29 17:00:00', '2019-06-30 03:00:00'),
(32, 'T009', '2019-06-28 16:00:00', '2019-06-28 19:00:00'),
(33, 'E002', '2019-07-02 19:00:00', '2019-07-03 17:00:00'),
(33, 'I002', '2019-07-02 12:00:00', '2019-07-02 16:00:00'),
(33, 'S001', '2019-07-03 17:00:00', '2019-07-04 03:00:00'),
(33, 'T009', '2019-07-02 16:00:00', '2019-07-02 19:00:00'),
(34, 'E004', '2019-07-09 20:00:00', '2019-07-10 17:00:00'),
(34, 'I004', '2019-07-09 12:00:00', '2019-07-09 18:00:00'),
(34, 'S001', '2019-07-10 17:00:00', '2019-07-11 03:00:00'),
(34, 'T001', '2019-07-09 18:00:00', '2019-07-09 20:00:00'),
(35, 'E003', '2019-07-17 18:00:00', '2019-07-18 14:00:00'),
(35, 'I003', '2019-07-17 12:00:00', '2019-07-17 14:00:00'),
(35, 'S001', '2019-07-18 14:00:00', '2019-07-19 00:00:00'),
(35, 'T008', '2019-07-17 14:00:00', '2019-07-17 18:00:00'),
(36, 'E002', '2019-07-21 19:00:00', '2019-07-22 17:00:00'),
(36, 'I002', '2019-07-21 12:00:00', '2019-07-21 16:00:00'),
(36, 'S001', '2019-07-22 17:00:00', '2019-07-23 03:00:00'),
(36, 'T009', '2019-07-21 16:00:00', '2019-07-21 19:00:00'),
(37, 'E004', '2019-08-05 20:00:00', '2019-08-06 17:00:00'),
(37, 'I004', '2019-08-05 12:00:00', '2019-08-05 18:00:00'),
(37, 'S001', '2019-08-06 17:00:00', '2019-08-07 03:00:00'),
(37, 'T001', '2019-08-05 18:00:00', '2019-08-05 20:00:00'),
(38, 'E002', '2019-08-20 19:00:00', '2019-08-21 17:00:00'),
(38, 'I002', '2019-08-20 12:00:00', '2019-08-20 16:00:00'),
(38, 'S001', '2019-08-21 17:00:00', '2019-08-22 03:00:00'),
(38, 'T009', '2019-08-20 16:00:00', '2019-08-20 19:00:00'),
(39, 'E002', '2019-09-08 19:00:00', '2019-09-09 17:00:00'),
(39, 'I002', '2019-09-08 12:00:00', '2019-09-08 16:00:00'),
(39, 'S001', '2019-09-09 17:00:00', '2019-09-10 03:00:00'),
(39, 'T009', '2019-09-08 16:00:00', '2019-09-08 19:00:00'),
(40, 'E002', '2019-09-27 18:00:00', '2019-09-28 16:00:00'),
(40, 'I002', '2019-09-27 12:00:00', '2019-09-27 16:00:00'),
(40, 'S001', '2019-09-28 16:00:00', '2019-09-29 02:00:00'),
(40, 'T007', '2019-09-27 16:00:00', '2019-09-27 18:00:00'),
(41, 'E001', '2019-10-06 18:00:00', '2019-10-07 17:00:00'),
(41, 'I001', '2019-10-06 12:00:00', '2019-10-06 15:00:00'),
(41, 'S001', '2019-10-07 17:00:00', '2019-10-08 03:00:00'),
(41, 'T006', '2019-10-06 15:00:00', '2019-10-06 18:00:00'),
(42, 'E002', '2019-10-09 18:00:00', '2019-10-10 16:00:00'),
(42, 'I002', '2019-10-09 12:00:00', '2019-10-09 16:00:00'),
(42, 'S001', '2019-10-10 16:00:00', '2019-10-11 02:00:00'),
(42, 'T005', '2019-10-09 16:00:00', '2019-10-09 18:00:00'),
(43, 'E003', '2019-10-21 15:00:00', '2019-10-22 11:00:00'),
(43, 'I003', '2019-10-21 12:00:00', '2019-10-21 14:00:00'),
(43, 'S001', '2019-10-22 11:00:00', NULL),
(43, 'T003', '2019-10-21 14:00:00', '2019-10-21 15:00:00'),
(44, 'I003', '2019-10-21 12:00:00', '2019-10-21 14:00:00'),
(44, 'T008', '2019-10-21 14:00:00', '2019-10-21 18:00:00'),
(45, 'I004', '2019-10-21 12:00:00', NULL);

--
-- Trigger `lavorazione`
--
DELIMITER $$
CREATE TRIGGER `ControlloDateFasiLavorazione` BEFORE UPDATE ON `lavorazione` FOR EACH ROW BEGIN
	DECLARE DataInizioUltimaFase DATE;
	DECLARE DurataFase TIME;
	
	SELECT MAX(DataOraInizio) INTO DataInizioUltimaFase FROM lavorazione WHERE CodLotto = new.CodLotto;
	SELECT DurataLavorazione INTO DurataFase FROM FASEPRODUTTIVA WHERE CodFase = new.CodFase;
	
	IF(new.DataOraFine < DataInizioUltimaFase + DurataFase) THEN
		SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'La fase corrente non puo'' terminata prima della sua durata definita.'; 
	END IF;
END
$$
DELIMITER ;
DELIMITER $$
CREATE TRIGGER `ControlloFasiLavorazione` BEFORE INSERT ON `lavorazione` FOR EACH ROW BEGIN
	DECLARE fasiPassate TINYINT(1);
	DECLARE nuovaFase VARCHAR(1);
	DECLARE DataFineUltimaFase DATE;
	DECLARE msgErrore VARCHAR(255);

	SET nuovaFase = LEFT(new.CodFase, 1);
	SET msgErrore = 'NESSUN-ERRORE';
	
	IF EXISTS (SELECT * FROM lavorazione WHERE CodLotto = new.CodLotto AND DataOraFine IS NULL) THEN 
		SET msgErrore = 'Il lotto deve ancora terminare la lavorazione di una fase. Terminare prima quella in corso';
	END IF;

	
	SELECT COUNT(CodLotto) INTO fasiPassate FROM lavorazione WHERE CodLotto = new.CodLotto;

	IF(fasiPassate = 0 AND nuovaFase <> 'I') THEN
		SET msgErrore = 'Il lotto deve ancora entrare in lavorazione. Va avviata la fase di impasto.';
	END IF;
	
	SELECT MAX(DataOraFine) INTO DataFineUltimaFase FROM lavorazione WHERE CodLotto = new.CodLotto;
	IF(new.DataOraInizio < DataFineUltimaFase) THEN
		SET msgErrore = 'L''inizio della nuova fase non puo'' essere precedente alla fine dell''ultima svolta.'; 
	END IF;
	
	IF(fasiPassate = 1 AND nuovaFase <> 'T') THEN
		SET msgErrore = 'Il lotto ha effettuato solo la fase di impasto. Va avviata la fase di trafilatura.'; 
    END IF;
    
	IF(fasiPassate = 2 AND nuovaFase <> 'E') THEN
		SET msgErrore = 'Il lotto ha effettuato solo le fasi di impasto e trafilatura. Va avviata la fase di essiccamento.';
    END IF;
    
	IF(fasiPassate = 3 AND nuovaFase <> 'S') THEN
		SET msgErrore = 'Il lotto ha effettuato le fasi di impasto, trafilatura e essiccamento. Va avviata la fase di stabilizzazione.';
    END IF;
    
    IF(fasiPassate = 4) THEN
    	SET msgErrore = 'Il lotto ha terminato la lavorazione.';
    END IF;
    
	IF(msgErrore <> 'NESSUN-ERRORE') THEN
		SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = msgErrore;
	END IF;
END
$$
DELIMITER ;

-- --------------------------------------------------------

--
-- Struttura stand-in per le viste `LottiInLavorazione`
-- (Vedi sotto per la vista effettiva)
--
CREATE TABLE `LottiInLavorazione` (
`CodLotto` int(11)
,`Nome` varchar(20)
,`Integrale` tinyint(1)
,`DataOraInizioFase` datetime
);

-- --------------------------------------------------------

--
-- Struttura della tabella `LOTTODIPRODUZIONE`
--

CREATE TABLE `LOTTODIPRODUZIONE` (
  `CodLotto` int(11) NOT NULL,
  `PesoUnitario` int(4) NOT NULL,
  `PrezzoUnitario` float NOT NULL,
  `ScadenzaUnita` date NOT NULL,
  `CodPasta` int(11) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

--
-- Dump dei dati per la tabella `LOTTODIPRODUZIONE`
--

INSERT INTO `LOTTODIPRODUZIONE` (`CodLotto`, `PesoUnitario`, `PrezzoUnitario`, `ScadenzaUnita`, `CodPasta`) VALUES
(1, 500, 4.5, '2018-07-11', 1),
(2, 500, 5.5, '2018-07-22', 8),
(3, 500, 5.5, '2018-08-06', 8),
(4, 1000, 8, '2018-08-22', 7),
(5, 500, 3.5, '2018-09-03', 9),
(6, 750, 5.5, '2018-09-16', 6),
(7, 750, 5.5, '2018-10-06', 6),
(8, 500, 3.5, '2018-10-21', 9),
(9, 1000, 8, '2018-10-27', 4),
(10, 500, 3.5, '2018-11-08', 9),
(11, 750, 5.5, '2018-11-19', 6),
(12, 750, 5.5, '2018-12-06', 6),
(13, 1000, 8, '2018-12-16', 7),
(14, 1000, 6, '2018-12-23', 2),
(15, 500, 4.5, '2019-01-02', 1),
(16, 500, 3.6, '2019-07-13', 9),
(17, 1000, 8.1, '2019-07-15', 4),
(18, 750, 5.6, '2019-07-27', 6),
(19, 1000, 8.1, '2019-08-12', 7),
(20, 1000, 8.1, '2019-08-18', 4),
(21, 750, 7.6, '2019-08-23', 3),
(22, 1000, 8.1, '2019-09-09', 4),
(23, 1000, 8.1, '2019-09-24', 4),
(24, 500, 5.6, '2019-09-30', 8),
(25, 1000, 6.1, '2019-10-20', 2),
(26, 500, 5.6, '2019-11-05', 5),
(27, 1000, 8.1, '2019-11-20', 4),
(28, 750, 7.6, '2019-11-22', 3),
(29, 500, 5.6, '2019-11-30', 5),
(30, 1000, 6.1, '2019-12-10', 2),
(31, 500, 5.7, '2020-07-24', 5),
(32, 500, 3.7, '2020-08-04', 9),
(33, 500, 3.7, '2020-08-14', 9),
(34, 500, 4.7, '2020-08-20', 1),
(35, 500, 5.7, '2020-08-26', 8),
(36, 500, 3.7, '2020-09-08', 9),
(37, 500, 4.7, '2020-09-10', 1),
(38, 500, 3.7, '2020-09-21', 9),
(39, 500, 3.7, '2020-09-24', 9),
(40, 1000, 8.2, '2020-09-30', 7),
(41, 750, 5.7, '2020-10-21', 6),
(42, 500, 5.7, '2020-10-26', 5),
(43, 750, 7.7, '2020-11-05', 3),
(44, 500, 5.7, '2020-11-23', 8),
(45, 1000, 8.2, '2020-12-01', 4);

--
-- Trigger `LOTTODIPRODUZIONE`
--
DELIMITER $$
CREATE TRIGGER `ControlloPercentualiMiscela` BEFORE INSERT ON `LOTTODIPRODUZIONE` FOR EACH ROW BEGIN
	DECLARE SommaPercent FLOAT;
	DECLARE Miscela INTEGER;
    DECLARE ErrorMsg VARCHAR(255);

	SELECT CodMiscela INTO Miscela
	FROM PASTA
	WHERE CodPasta = new.CodPasta;

	SELECT SUM(PercentualeSemola) INTO SommaPercent
	FROM composizione WHERE CodMiscela = Miscela;

	IF(SommaPercent < 100 OR SommaPercent > 100) THEN
		SET ErrorMsg =  CONCAT('La miscela ', Miscela, ' ha percentuali di semole errate. Verificarle prima di procedere con l''avvio della produzione.');
		SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = ErrorMsg;
	END IF;
END
$$
DELIMITER ;

-- --------------------------------------------------------

--
-- Struttura della tabella `MISCELADISEMOLE`
--

CREATE TABLE `MISCELADISEMOLE` (
  `CodMiscela` int(11) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

--
-- Dump dei dati per la tabella `MISCELADISEMOLE`
--

INSERT INTO `MISCELADISEMOLE` (`CodMiscela`) VALUES
(1),
(2),
(5),
(7),
(8),
(9);

-- --------------------------------------------------------

--
-- Struttura della tabella `NEGOZIO`
--

CREATE TABLE `NEGOZIO` (
  `CodNegozio` varchar(6) NOT NULL,
  `Nome` varchar(50) NOT NULL,
  `Catena` varchar(50) DEFAULT NULL,
  `Indirizzo` varchar(50) NOT NULL,
  `Citta` varchar(50) NOT NULL,
  `Regione` varchar(50) NOT NULL,
  `Stato` varchar(50) NOT NULL,
  `Telefono` varchar(20) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

--
-- Dump dei dati per la tabella `NEGOZIO`
--

INSERT INTO `NEGOZIO` (`CodNegozio`, `Nome`, `Catena`, `Indirizzo`, `Citta`, `Regione`, `Stato`, `Telefono`) VALUES
('N00001', 'FICO Eataly World', 'Eataly', 'Via Paolo Canali, 8', 'Bologna', 'Emilia Romagna', 'Italia', '0510029001'),
('N00002', 'Eataly Milano Smeraldo', 'Eataly', 'Piazza XXV Aprile, 10', 'Milano', 'Lombardia', 'Italia', '0249497301'),
('N00003', 'Il negozio della Pasta', NULL, 'Piazza Mazzini, 11', 'Roma', 'Lazio', 'Italia', '0656786'),
('N00004', 'Rinascente Milano', 'Rinascente', 'Piazza del Duomo, Milano', 'Milano', 'Lombardia', 'Italia', '02 88521'),
('N00005', 'Rinascente Roma', 'Rinascente', 'Via del Tritone, 61', 'Roma', 'Lazio', 'Italia', '06 879161'),
('N00006', 'Rinascente Firenze', 'Rinascente', 'Piazza della Repubblica, 4', 'Firenze', 'Toscana', 'Italia', '055 219113'),
('N00007', 'Rinascente Torino', 'Rinascente', 'Via Giuseppe Luigi Lagrange, 15', 'Torino', 'Piemonte', 'Italia', '011 517 0075'),
('N00008', 'Rinascente Monza', 'Rinascente', 'Largo Giuseppe Mazzini', 'Monza', 'Lombardia', 'Italia', '039 230 0192'),
('N00009', 'Eataly Bari', 'Eataly', 'Fiera del Levante, Lungomare Starita, 4', 'Bari', 'Puglia', 'Italia', '080 618 0401'),
('N00010', 'Eataly Bologna Ambasciatori', 'Eataly', 'Via degli Orefici, 19', 'Bologna', 'Emilia Romagna', 'Italia', '051 095 2820'),
('N00011', 'Eataly Firenze', 'Eataly', 'Via de\' Martelli, 22R', 'Firenze', 'Toscana', 'Italia', '055 015 3601'),
('N00012', 'Eataly Forlì', 'Eataly', 'Piazza Aurelio Saffi, 45', 'Forlì', 'Emilia Romagna', 'Italia', '0543 171 8410'),
('N00013', 'Eataly Genova', 'Eataly', 'Edificio Millo Porto Antico, Calata Cattaneo, 15', 'Genova', 'Liguria', 'Italia', '010 869 8721'),
('N00014', 'Eataly Monticello', 'Eataly', 'SS231, 2', 'Monticello', 'Lazio', 'Italia', '0173 592424'),
('N00015', 'Eataly Parma', 'Eataly', 'Barilla Center, Largo Fausto Bocchi, 7A', 'Parma', 'Emilia Romagna', 'Italia', '0521 247632'),
('N00016', 'Eataly Piacenza', 'Eataly', 'Stradone Farnese, 39', 'Piacenza', 'Emilia Romagna', 'Italia', '0523 173 7001'),
('N00017', 'Eataly Pinerolo', 'Eataly', 'Via Poirino, 104', 'Pinerolo', 'Piemonte', 'Italia', '0121 042601'),
('N00018', 'Eataly Roma', 'Eataly', 'Piazzale 12 Ottobre 1492', 'Roma', 'Lazio', 'Italia', '06 9027 9201'),
('N00019', 'Eataly Torino Lingotto', 'Eataly', 'Via Nizza 230, 14', 'Torino', 'Piemonte', 'Italia', '011 1950 6801'),
('N00020', 'Eataly Torino Lagrange', 'Eataly', 'Via Giuseppe Luigi Lagrange, 3', 'Torino', 'Piemonte', 'Italia', '011 037 3221'),
('N00021', 'Eataly Trieste', 'Eataly', 'Riva Tommaso Gulli, 1', 'Trieste', 'Friuli Venezia Giulia', 'Italia', '040 246 5701'),
('N00022', 'Eataly in collina', 'Eataly', 'Via Vittorio Emanuele II, 32', 'Chieri', 'Piemonte', 'Italia', '011 947 2367'),
('N00023', 'Eataly Mercato di San Lorenzo', 'Eataly', 'Via de\' Martelli, 22R', 'Firenze', 'Toscana', 'Italia', '055 015 3601'),
('N00024', 'Eataly via Fillungo', 'Eataly', 'Via Fillungo, 91/A', 'Lucca', 'Toscana', 'Italia', '0583 429216'),
('N00025', 'Eataly New York City', 'Eataly', '200 5th Avenue', 'New York', 'New York', 'Stati Uniti', '+1 212-229-2560'),
('N00026', 'Eataly Chicago', 'Eataly', '43 E. Ohio St', 'Chicago', 'Illinois', 'Stati Uniti', '+1 312-521-8700'),
('N00027', 'Eataly NYC Downtown', 'Eataly', '4 World Trade Center', 'New York', 'New York', 'Stati Uniti', '+1 212-897-2895'),
('N00028', 'Eataly Boston', 'Eataly', 'Prudential Center - 800 Boylston Street', 'Boston', 'Massachusetts', 'Stati Uniti', '+1 617-807-7300'),
('N00029', 'Eataly Los Angeles', 'Eataly', '10250 Santa Monica Blvd', 'Los Angeles', 'California', 'Stati Uniti', '+1 213-310-8000'),
('N00030', 'Eataly São Paulo', 'Eataly', 'v. Pres. Juscelino Kubitschek, 1489 - Itaim Bibi', 'San Paolo', 'San Paolo', 'Brasile', '+55 11 3279-3300'),
('N00031', 'Eataly München', 'Eataly', 'Viktualienmarkt 15, 80331 München, Germania', 'Monaco di Baviera', 'Baviera', 'Germania', '+49 89 248817711'),
('N00032', 'Eataly Stockholm', 'Eataly', 'Biblioteksgatan 5, 111 44 Stockholm, Svezia', 'Stoccolma', 'Svealand', 'Svezia', '+46 8 400 175 00');

-- --------------------------------------------------------

--
-- Struttura della tabella `ORDINE`
--

CREATE TABLE `ORDINE` (
  `NumOrdine` int(11) NOT NULL,
  `Importo` float NOT NULL,
  `DataOraEffettuazione` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

--
-- Dump dei dati per la tabella `ORDINE`
--

INSERT INTO `ORDINE` (`NumOrdine`, `Importo`, `DataOraEffettuazione`) VALUES
(1, 69.5, '2017-02-01 12:00:00'),
(2, 159, '2017-02-03 12:00:00'),
(3, 133.5, '2017-02-18 12:00:00'),
(4, 139, '2017-03-05 12:00:00'),
(5, 130.5, '2017-03-18 12:00:00'),
(6, 87.5, '2017-03-19 12:00:00'),
(7, 92, '2017-03-31 12:00:00'),
(8, 106.5, '2017-04-11 12:00:00'),
(9, 122.5, '2017-04-22 12:00:00'),
(10, 115.5, '2017-04-23 12:00:00'),
(11, 60, '2017-05-03 12:00:00'),
(12, 98, '2017-05-05 12:00:00'),
(13, 48.5, '2017-05-17 12:00:00'),
(14, 109, '2017-05-28 12:00:00'),
(15, 126.5, '2017-06-01 12:00:00'),
(16, 98.5, '2017-06-15 12:00:00'),
(17, 131, '2017-06-23 12:00:00'),
(18, 83, '2017-07-02 12:00:00'),
(19, 122.5, '2017-07-12 12:00:00'),
(20, 115.5, '2017-07-16 12:00:00'),
(21, 116.5, '2017-07-19 12:00:00'),
(22, 129, '2017-07-24 12:00:00'),
(23, 143.5, '2017-07-31 12:00:00'),
(24, 78.5, '2017-08-02 12:00:00'),
(25, 112.5, '2017-08-12 12:00:00'),
(26, 93.5, '2017-08-13 12:00:00'),
(27, 135.5, '2017-08-27 12:00:00'),
(28, 81, '2017-09-03 12:00:00'),
(29, 112.5, '2017-09-16 12:00:00'),
(30, 139.5, '2017-09-17 12:00:00'),
(31, 134.5, '2017-09-21 12:00:00'),
(32, 110, '2017-09-27 12:00:00'),
(33, 107.5, '2017-10-06 12:00:00'),
(34, 101, '2017-10-12 12:00:00'),
(35, 128, '2017-10-14 12:00:00'),
(36, 91.9, '2018-06-01 12:00:00'),
(37, 111.2, '2018-06-11 12:00:00'),
(38, 129.8, '2018-06-15 12:00:00'),
(39, 125.1, '2018-06-18 12:00:00'),
(40, 150.4, '2018-06-23 12:00:00'),
(41, 72.6, '2018-07-02 12:00:00'),
(42, 115.1, '2018-07-03 12:00:00'),
(43, 157.5, '2018-07-12 12:00:00'),
(44, 122.3, '2018-07-18 12:00:00'),
(45, 107.9, '2018-07-26 12:00:00'),
(46, 117.3, '2018-08-05 12:00:00'),
(47, 166.1, '2018-08-10 12:00:00'),
(48, 142.8, '2018-08-13 12:00:00'),
(49, 159.5, '2018-08-17 12:00:00'),
(50, 151.9, '2018-08-19 12:00:00'),
(51, 120, '2018-08-25 12:00:00'),
(52, 159.5, '2018-09-02 12:00:00'),
(53, 127.1, '2018-09-11 12:00:00'),
(54, 143.3, '2018-09-20 12:00:00'),
(55, 128.1, '2018-09-29 12:00:00'),
(56, 71.4, '2018-10-09 12:00:00'),
(57, 177.2, '2018-10-14 12:00:00'),
(58, 183.3, '2018-10-16 12:00:00'),
(59, 106.2, '2018-10-17 12:00:00'),
(60, 130.1, '2018-10-27 12:00:00'),
(61, 118.9, '2018-10-28 12:00:00'),
(62, 184.8, '2018-11-05 12:00:00'),
(63, 123.4, '2018-11-09 12:00:00'),
(64, 75.7, '2018-11-14 12:00:00'),
(65, 164.1, '2018-11-23 12:00:00'),
(66, 161, '2018-11-28 12:00:00'),
(67, 110.1, '2018-12-04 12:00:00'),
(68, 183.8, '2018-12-06 12:00:00'),
(69, 187.1, '2018-12-13 12:00:00'),
(70, 104.3, '2018-12-15 12:00:00'),
(71, 176.7, '2018-12-25 12:00:00'),
(72, 128, '2019-01-04 12:00:00'),
(73, 113.7, '2019-01-13 12:00:00'),
(74, 73.5, '2019-06-01 12:00:00'),
(75, 47, '2019-06-10 12:00:00'),
(76, 53.4, '2019-06-12 12:00:00'),
(77, 49.4, '2019-06-19 12:00:00'),
(78, 66.8, '2019-06-25 12:00:00'),
(79, 46, '2019-07-03 12:00:00'),
(80, 60.1, '2019-07-12 12:00:00'),
(81, 77.6, '2019-07-20 12:00:00'),
(82, 48.7, '2019-07-21 12:00:00'),
(83, 41.3, '2019-07-26 12:00:00'),
(84, 43, '2019-08-04 12:00:00'),
(85, 51.7, '2019-08-07 12:00:00'),
(86, 54.4, '2019-08-13 12:00:00'),
(87, 39.6, '2019-08-23 12:00:00'),
(88, 45, '2019-08-31 12:00:00'),
(89, 45, '2019-09-05 12:00:00'),
(90, 76.2, '2019-09-07 12:00:00'),
(91, 86.9, '2019-09-08 12:00:00'),
(92, 98.6, '2019-09-13 12:00:00'),
(93, 102.2, '2019-09-20 12:00:00'),
(94, 143.9, '2019-09-24 12:00:00'),
(95, 122.5, '2019-09-28 12:00:00'),
(96, 109.1, '2019-10-02 12:00:00'),
(97, 102, '2019-10-04 12:00:00'),
(98, 132.8, '2019-10-09 12:00:00'),
(99, 107.2, '2019-10-19 12:00:00'),
(100, 178.8, '2019-10-28 12:00:00'),
(101, 96.2, '2019-11-03 12:00:00'),
(102, 53.1, '2019-11-11 12:00:00'),
(103, 45.6, '2019-11-16 12:00:00'),
(104, 73.4, '2019-11-17 12:00:00'),
(105, 79.1, '2019-11-22 12:00:00'),
(106, 59.5, '2019-12-02 12:00:00'),
(107, 34.2, '2019-12-03 12:00:00'),
(108, 50.6, '2019-12-04 12:00:00'),
(109, 107.6, '2019-12-13 12:00:00');

-- --------------------------------------------------------

--
-- Struttura della tabella `PASTA`
--

CREATE TABLE `PASTA` (
  `CodPasta` int(11) NOT NULL,
  `Nome` varchar(20) NOT NULL,
  `TempoCottura` tinyint(2) NOT NULL,
  `Forma` varchar(200) NOT NULL,
  `Integrale` tinyint(1) NOT NULL,
  `CodMiscela` int(11) NOT NULL,
  `FaseImpasto` varchar(4) NOT NULL,
  `FaseTrafilatura` varchar(4) NOT NULL,
  `FaseEssiccamento` varchar(4) NOT NULL,
  `FaseStabilizzazione` varchar(4) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

--
-- Dump dei dati per la tabella `PASTA`
--

INSERT INTO `PASTA` (`CodPasta`, `Nome`, `TempoCottura`, `Forma`, `Integrale`, `CodMiscela`, `FaseImpasto`, `FaseTrafilatura`, `FaseEssiccamento`, `FaseStabilizzazione`) VALUES
(1, 'Spaghetti', 9, 'Forma lunga e sottile e di sezione tonda.', 0, 1, 'I004', 'T001', 'E004', 'S001'),
(2, 'Linguine', 7, 'Forma lunga e sottile e di sezione piatta.', 0, 1, 'I001', 'T002', 'E001', 'S001'),
(3, 'Caserecci', 10, 'Forma corta e arrotolata su se stessa.', 0, 7, 'I003', 'T003', 'E003', 'S001'),
(4, 'Maccheroni', 12, 'Forma tubolare, internamente vuota, di lunghezza 5 cm.', 0, 8, 'I004', 'T004', 'E004', 'S001'),
(5, 'Ruote', 13, 'Forma cilindrica alto ca. 22 mm costituita da una corona circolare collegata al mozzo da 6 raggi.', 0, 5, 'I002', 'T005', 'E002', 'S001'),
(6, 'Rigatoni', 10, 'Forma cilindrica, internamente vuota, di lunghezza 6 cm.', 0, 1, 'I001', 'T006', 'E001', 'S001'),
(7, 'Farfalle', 8, 'Forma corta a forma di \"farfalla\", con i bordi zigzagati e il centro raccolto.', 0, 2, 'I002', 'T007', 'E002', 'S001'),
(8, 'Penne rigate', 12, 'Forma cilindrica tagliata alle estremità con tagli obliqui paralleli.', 1, 9, 'I003', 'T008', 'E003', 'S001'),
(9, 'Linguine', 8, 'Forma lunga e sottile e di sezione piatta.', 1, 5, 'I002', 'T009', 'E002', 'S001'),
(10, 'Farfalle', 9, 'Forma corta a forma di \"farfalla\", con i bordi zigzagati e il centro raccolto.', 1, 7, 'I003', 'T010', 'E003', 'S001');

-- --------------------------------------------------------

--
-- Struttura della tabella `RISTORANTE`
--

CREATE TABLE `RISTORANTE` (
  `CodRistorante` varchar(6) NOT NULL,
  `Nome` varchar(50) NOT NULL,
  `Valutazione` float DEFAULT NULL,
  `Indirizzo` varchar(50) NOT NULL,
  `Chef` varchar(50) NOT NULL,
  `Stato` varchar(50) NOT NULL,
  `Telefono` varchar(20) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

--
-- Dump dei dati per la tabella `RISTORANTE`
--

INSERT INTO `RISTORANTE` (`CodRistorante`, `Nome`, `Valutazione`, `Indirizzo`, `Chef`, `Stato`, `Telefono`) VALUES
('R00001', 'Ristorante Cracco', 3.9, 'Corso Vittorio Emanuele II, Milano', 'Carlo Cracco', 'Italia', '02876774'),
('R00002', 'Le calandre', NULL, 'Via Liguria, 1, Sarmeola di Rubano', 'Massimiliano Alajmo', 'Italia', '049630303'),
('R00003', 'Osteria Francescana', 4.5, 'Via Stella, 22, Modena', 'Massimo Bottura', 'Italia', '059223912'),
('R00004', 'RistorESU Nord Piovego', 5, 'Viale Giuseppe Colombo, 1, Padova', 'Mario Rossi', 'Italia', '0497430813'),
('R00005', 'The Square', NULL, '6-10 Bruton Street, Londra W1J 6PU', 'Clément Leroy', 'Inghilterra', '+44 20 7495 7100'),
('R00006', 'Teatro alla Scala - Il Marchesino', NULL, 'Via Filodrammatici, 2, Milano', 'Gualtiero Marchesi', 'Italia', '0236706660'),
('R00007', 'IL Punto Ristorante', NULL, '507 9th Ave, New York', 'Antonio Mermolia', 'Stati Uniti', '+1(212)-244-88');

-- --------------------------------------------------------

--
-- Struttura della tabella `SEMOLA`
--

CREATE TABLE `SEMOLA` (
  `Varieta` varchar(20) NOT NULL,
  `Nome` varchar(40) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

--
-- Dump dei dati per la tabella `SEMOLA`
--

INSERT INTO `SEMOLA` (`Varieta`, `Nome`) VALUES
('Colosseo', NULL),
('Desert Durum', NULL),
('Iride', NULL),
('Marco Aurelio', NULL);

-- --------------------------------------------------------

--
-- Struttura stand-in per le viste `Top5ProdottiAcquistatiAnnoScorso`
-- (Vedi sotto per la vista effettiva)
--
CREATE TABLE `Top5ProdottiAcquistatiAnnoScorso` (
`CodPasta` int(11)
,`Nome` varchar(20)
,`ConfezioniVendute` bigint(21)
);

-- --------------------------------------------------------

--
-- Struttura per la vista `ClassificaClienti`
--
DROP TABLE IF EXISTS `ClassificaClienti`;

CREATE ALGORITHM=UNDEFINED DEFINER=`tazzalin`@`localhost` SQL SECURITY DEFINER VIEW `ClassificaClienti`  AS  select `Clienti`.`Codice` AS `Codice`,`Clienti`.`Nome` AS `Nome`,`Clienti`.`Fatturato` AS `Fatturato` from `Clienti` order by `Clienti`.`Fatturato` desc ;

-- --------------------------------------------------------

--
-- Struttura per la vista `Clienti`
--
DROP TABLE IF EXISTS `Clienti`;

CREATE ALGORITHM=UNDEFINED DEFINER=`tazzalin`@`localhost` SQL SECURITY DEFINER VIEW `Clienti`  AS  select `FatturatoNegozi`.`CodNegozio` AS `Codice`,`FatturatoNegozi`.`Nome` AS `Nome`,`FatturatoNegozi`.`Fatturato` AS `Fatturato` from `FatturatoNegozi` union select `FatturatoRistoranti`.`CodRistorante` AS `Codice`,`FatturatoRistoranti`.`Nome` AS `Nome`,`FatturatoRistoranti`.`Fatturato` AS `Fatturato` from `FatturatoRistoranti` ;

-- --------------------------------------------------------

--
-- Struttura per la vista `FatturatoNegozi`
--
DROP TABLE IF EXISTS `FatturatoNegozi`;

CREATE ALGORITHM=UNDEFINED DEFINER=`tazzalin`@`localhost` SQL SECURITY DEFINER VIEW `FatturatoNegozi`  AS  select `NGZ`.`CodNegozio` AS `CodNegozio`,`NGZ`.`Nome` AS `Nome`,`NGZ`.`Indirizzo` AS `Indirizzo`,`NGZ`.`Citta` AS `Citta`,`NGZ`.`Stato` AS `Stato`,sum(`O`.`Importo`) AS `Fatturato` from ((`ORDINE` `O` join `fatturaN` `FN` on((`O`.`NumOrdine` = `FN`.`NumOrdine`))) join `NEGOZIO` `NGZ` on((`FN`.`CodNegozio` = `NGZ`.`CodNegozio`))) group by `NGZ`.`CodNegozio`,`NGZ`.`Nome`,`NGZ`.`Indirizzo`,`NGZ`.`Citta`,`NGZ`.`Stato` ;

-- --------------------------------------------------------

--
-- Struttura per la vista `FatturatoRistoranti`
--
DROP TABLE IF EXISTS `FatturatoRistoranti`;

CREATE ALGORITHM=UNDEFINED DEFINER=`tazzalin`@`localhost` SQL SECURITY DEFINER VIEW `FatturatoRistoranti`  AS  select `RST`.`CodRistorante` AS `CodRistorante`,`RST`.`Nome` AS `Nome`,`RST`.`Indirizzo` AS `Indirizzo`,`RST`.`Stato` AS `Stato`,sum(`O`.`Importo`) AS `Fatturato` from ((`ORDINE` `O` join `fatturaR` `FR` on((`O`.`NumOrdine` = `FR`.`NumOrdine`))) join `RISTORANTE` `RST` on((`FR`.`CodRistorante` = `RST`.`CodRistorante`))) group by `RST`.`CodRistorante`,`RST`.`Nome`,`RST`.`Indirizzo`,`RST`.`Stato` ;

-- --------------------------------------------------------

--
-- Struttura per la vista `FatturePendenti`
--
DROP TABLE IF EXISTS `FatturePendenti`;

CREATE ALGORITHM=UNDEFINED DEFINER=`tazzalin`@`localhost` SQL SECURITY DEFINER VIEW `FatturePendenti`  AS  select `NGZ`.`CodNegozio` AS `CodNegozio`,`NGZ`.`Nome` AS `Nome`,count(`O`.`NumOrdine`) AS `NumFatture`,sum(`O`.`Importo`) AS `TotImporto` from ((`ORDINE` `O` join `fatturaN` `FN` on((`O`.`NumOrdine` = `FN`.`NumOrdine`))) join `NEGOZIO` `NGZ` on((`FN`.`CodNegozio` = `NGZ`.`CodNegozio`))) where isnull(`FN`.`DataPagamento`) group by `NGZ`.`CodNegozio`,`NGZ`.`Nome` ;

-- --------------------------------------------------------

--
-- Struttura per la vista `LottiInLavorazione`
--
DROP TABLE IF EXISTS `LottiInLavorazione`;

CREATE ALGORITHM=UNDEFINED DEFINER=`tazzalin`@`localhost` SQL SECURITY DEFINER VIEW `LottiInLavorazione`  AS  select `LP`.`CodLotto` AS `CodLotto`,`P`.`Nome` AS `Nome`,`P`.`Integrale` AS `Integrale`,max(`L`.`DataOraInizio`) AS `DataOraInizioFase` from ((`LOTTODIPRODUZIONE` `LP` join `lavorazione` `L` on((`LP`.`CodLotto` = `L`.`CodLotto`))) join `PASTA` `P` on((`LP`.`CodPasta` = `P`.`CodPasta`))) where (not(`LP`.`CodLotto` in (select `LP1`.`CodLotto` from (`LOTTODIPRODUZIONE` `LP1` join `lavorazione` `L` on((`LP1`.`CodLotto` = `L`.`CodLotto`))) group by `LP1`.`CodLotto` having ((count(`L`.`CodFase`) = 4) and (`L`.`DataOraFine` is not null))))) group by `LP`.`CodLotto`,`P`.`Nome`,`P`.`Integrale` ;

-- --------------------------------------------------------

--
-- Struttura per la vista `Top5ProdottiAcquistatiAnnoScorso`
--
DROP TABLE IF EXISTS `Top5ProdottiAcquistatiAnnoScorso`;

CREATE ALGORITHM=UNDEFINED DEFINER=`tazzalin`@`localhost` SQL SECURITY DEFINER VIEW `Top5ProdottiAcquistatiAnnoScorso`  AS  select `P`.`CodPasta` AS `CodPasta`,`P`.`Nome` AS `Nome`,count(`C`.`NumOrdine`) AS `ConfezioniVendute` from (((`PASTA` `P` join `LOTTODIPRODUZIONE` `LP`) join `CONFEZIONE` `C`) join `ORDINE` `O`) where ((`P`.`CodPasta` = `LP`.`CodPasta`) and (`LP`.`CodLotto` = `C`.`CodLotto`) and (`C`.`NumOrdine` = `O`.`NumOrdine`) and (year(`O`.`DataOraEffettuazione`) = (year((curdate() - interval 1 year)) - 1))) group by `P`.`CodPasta`,`P`.`Nome` order by count(`C`.`NumOrdine`) desc limit 5 ;

--
-- Indici per le tabelle scaricate
--

--
-- Indici per le tabelle `composizione`
--
ALTER TABLE `composizione`
  ADD PRIMARY KEY (`Varieta`,`CodMiscela`),
  ADD KEY `Varieta` (`Varieta`,`CodMiscela`),
  ADD KEY `VIR5` (`CodMiscela`);

--
-- Indici per le tabelle `CONFEZIONE`
--
ALTER TABLE `CONFEZIONE`
  ADD PRIMARY KEY (`NumConfezione`,`CodLotto`),
  ADD KEY `NumConfezione` (`CodLotto`),
  ADD KEY `VIR9` (`NumOrdine`);

--
-- Indici per le tabelle `FASEPRODUTTIVA`
--
ALTER TABLE `FASEPRODUTTIVA`
  ADD PRIMARY KEY (`CodFase`);

--
-- Indici per le tabelle `fatturaN`
--
ALTER TABLE `fatturaN`
  ADD PRIMARY KEY (`NumOrdine`),
  ADD KEY `CodNegozio` (`CodNegozio`);

--
-- Indici per le tabelle `fatturaR`
--
ALTER TABLE `fatturaR`
  ADD PRIMARY KEY (`NumOrdine`),
  ADD KEY `CodNegozio` (`CodRistorante`);

--
-- Indici per le tabelle `FORNITORE`
--
ALTER TABLE `FORNITORE`
  ADD PRIMARY KEY (`CodFornitore`);

--
-- Indici per le tabelle `FORNITURA`
--
ALTER TABLE `FORNITURA`
  ADD PRIMARY KEY (`CodFornitore`,`Varieta`,`DataFornitura`),
  ADD KEY `CodFornitore` (`CodFornitore`),
  ADD KEY `Varieta` (`Varieta`),
  ADD KEY `Varieta_2` (`Varieta`);

--
-- Indici per le tabelle `GRANO`
--
ALTER TABLE `GRANO`
  ADD PRIMARY KEY (`Varieta`);

--
-- Indici per le tabelle `lavorazione`
--
ALTER TABLE `lavorazione`
  ADD PRIMARY KEY (`CodLotto`,`CodFase`),
  ADD KEY `CodFase` (`CodFase`),
  ADD KEY `CodLotto` (`CodLotto`);

--
-- Indici per le tabelle `LOTTODIPRODUZIONE`
--
ALTER TABLE `LOTTODIPRODUZIONE`
  ADD PRIMARY KEY (`CodLotto`),
  ADD KEY `CodPasta` (`CodPasta`);

--
-- Indici per le tabelle `MISCELADISEMOLE`
--
ALTER TABLE `MISCELADISEMOLE`
  ADD PRIMARY KEY (`CodMiscela`);

--
-- Indici per le tabelle `NEGOZIO`
--
ALTER TABLE `NEGOZIO`
  ADD PRIMARY KEY (`CodNegozio`);

--
-- Indici per le tabelle `ORDINE`
--
ALTER TABLE `ORDINE`
  ADD PRIMARY KEY (`NumOrdine`);

--
-- Indici per le tabelle `PASTA`
--
ALTER TABLE `PASTA`
  ADD PRIMARY KEY (`CodPasta`),
  ADD KEY `CodMiscela` (`CodMiscela`),
  ADD KEY `FaseImpasto` (`FaseImpasto`),
  ADD KEY `FaseTrafilatura` (`FaseTrafilatura`),
  ADD KEY `FaseEssiccamento` (`FaseEssiccamento`),
  ADD KEY `FaseStabilizzazione` (`FaseStabilizzazione`);

--
-- Indici per le tabelle `RISTORANTE`
--
ALTER TABLE `RISTORANTE`
  ADD PRIMARY KEY (`CodRistorante`);

--
-- Indici per le tabelle `SEMOLA`
--
ALTER TABLE `SEMOLA`
  ADD PRIMARY KEY (`Varieta`);

--
-- AUTO_INCREMENT per le tabelle scaricate
--

--
-- AUTO_INCREMENT per la tabella `FORNITORE`
--
ALTER TABLE `FORNITORE`
  MODIFY `CodFornitore` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=5;
--
-- AUTO_INCREMENT per la tabella `LOTTODIPRODUZIONE`
--
ALTER TABLE `LOTTODIPRODUZIONE`
  MODIFY `CodLotto` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=46;
--
-- AUTO_INCREMENT per la tabella `MISCELADISEMOLE`
--
ALTER TABLE `MISCELADISEMOLE`
  MODIFY `CodMiscela` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=10;
--
-- AUTO_INCREMENT per la tabella `ORDINE`
--
ALTER TABLE `ORDINE`
  MODIFY `NumOrdine` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=110;
--
-- Limiti per le tabelle scaricate
--

--
-- Limiti per la tabella `composizione`
--
ALTER TABLE `composizione`
  ADD CONSTRAINT `VIR4` FOREIGN KEY (`Varieta`) REFERENCES `SEMOLA` (`Varieta`) ON DELETE NO ACTION ON UPDATE CASCADE,
  ADD CONSTRAINT `VIR5` FOREIGN KEY (`CodMiscela`) REFERENCES `MISCELADISEMOLE` (`CodMiscela`) ON DELETE NO ACTION ON UPDATE CASCADE;

--
-- Limiti per la tabella `CONFEZIONE`
--
ALTER TABLE `CONFEZIONE`
  ADD CONSTRAINT `VIR8` FOREIGN KEY (`CodLotto`) REFERENCES `LOTTODIPRODUZIONE` (`CodLotto`) ON DELETE NO ACTION ON UPDATE CASCADE,
  ADD CONSTRAINT `VIR9` FOREIGN KEY (`NumOrdine`) REFERENCES `ORDINE` (`NumOrdine`) ON DELETE NO ACTION ON UPDATE CASCADE;

--
-- Limiti per la tabella `fatturaN`
--
ALTER TABLE `fatturaN`
  ADD CONSTRAINT `VIR10` FOREIGN KEY (`NumOrdine`) REFERENCES `ORDINE` (`NumOrdine`) ON DELETE NO ACTION ON UPDATE CASCADE,
  ADD CONSTRAINT `VIR11` FOREIGN KEY (`CodNegozio`) REFERENCES `NEGOZIO` (`CodNegozio`) ON DELETE NO ACTION ON UPDATE CASCADE;

--
-- Limiti per la tabella `fatturaR`
--
ALTER TABLE `fatturaR`
  ADD CONSTRAINT `fatturaR_ibfk_1` FOREIGN KEY (`NumOrdine`) REFERENCES `ORDINE` (`NumOrdine`) ON DELETE NO ACTION ON UPDATE CASCADE,
  ADD CONSTRAINT `fatturaR_ibfk_2` FOREIGN KEY (`CodRistorante`) REFERENCES `RISTORANTE` (`CodRistorante`) ON DELETE NO ACTION ON UPDATE CASCADE;

--
-- Limiti per la tabella `FORNITURA`
--
ALTER TABLE `FORNITURA`
  ADD CONSTRAINT `VIR1` FOREIGN KEY (`CodFornitore`) REFERENCES `FORNITORE` (`CodFornitore`) ON DELETE NO ACTION ON UPDATE CASCADE,
  ADD CONSTRAINT `VIR2` FOREIGN KEY (`Varieta`) REFERENCES `GRANO` (`Varieta`) ON DELETE NO ACTION ON UPDATE CASCADE;

--
-- Limiti per la tabella `lavorazione`
--
ALTER TABLE `lavorazione`
  ADD CONSTRAINT `VIR14` FOREIGN KEY (`CodLotto`) REFERENCES `LOTTODIPRODUZIONE` (`CodLotto`) ON DELETE NO ACTION ON UPDATE CASCADE,
  ADD CONSTRAINT `VIR15` FOREIGN KEY (`CodFase`) REFERENCES `FASEPRODUTTIVA` (`CodFase`) ON DELETE NO ACTION ON UPDATE CASCADE;

--
-- Limiti per la tabella `LOTTODIPRODUZIONE`
--
ALTER TABLE `LOTTODIPRODUZIONE`
  ADD CONSTRAINT `VIR7` FOREIGN KEY (`CodPasta`) REFERENCES `PASTA` (`CodPasta`) ON DELETE NO ACTION ON UPDATE CASCADE;

--
-- Limiti per la tabella `PASTA`
--
ALTER TABLE `PASTA`
  ADD CONSTRAINT `VIR16` FOREIGN KEY (`FaseImpasto`) REFERENCES `FASEPRODUTTIVA` (`CodFase`) ON DELETE NO ACTION ON UPDATE CASCADE,
  ADD CONSTRAINT `VIR17` FOREIGN KEY (`FaseTrafilatura`) REFERENCES `FASEPRODUTTIVA` (`CodFase`) ON DELETE NO ACTION ON UPDATE CASCADE,
  ADD CONSTRAINT `VIR18` FOREIGN KEY (`FaseEssiccamento`) REFERENCES `FASEPRODUTTIVA` (`CodFase`) ON DELETE NO ACTION ON UPDATE CASCADE,
  ADD CONSTRAINT `VIR19` FOREIGN KEY (`FaseStabilizzazione`) REFERENCES `FASEPRODUTTIVA` (`CodFase`) ON DELETE NO ACTION ON UPDATE CASCADE,
  ADD CONSTRAINT `VIR6` FOREIGN KEY (`CodMiscela`) REFERENCES `MISCELADISEMOLE` (`CodMiscela`) ON DELETE NO ACTION ON UPDATE CASCADE;

--
-- Limiti per la tabella `SEMOLA`
--
ALTER TABLE `SEMOLA`
  ADD CONSTRAINT `VIR3` FOREIGN KEY (`Varieta`) REFERENCES `GRANO` (`Varieta`) ON DELETE NO ACTION ON UPDATE CASCADE;

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
